"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[999],{1594:(at,A,a)=>{a.d(A,{N:()=>M});var l=a(4650),b=a(6895);const x=["container"];function q(y,u){if(1&y&&(l.TgZ(0,"div",1,2),l._UZ(2,"object",3),l.TgZ(3,"h1"),l._uU(4),l.qZA()()),2&y){const t=l.oxw();l.xp6(4),l.hij(" ",null==t.inputData?"Loading...":t.inputData,"")}}class M{constructor(){this.loading=!1,this.fixed=!1}ngOnInit(){}ngAfterViewInit(){if(this.fixed)try{this.container.last.nativeElement.style.position="fixed"}catch{}}}M.\u0275fac=function(u){return new(u||M)},M.\u0275cmp=l.Xpm({type:M,selectors:[["app-loading"]],viewQuery:function(u,t){if(1&u&&l.Gf(x,5),2&u){let m;l.iGM(m=l.CRH())&&(t.container=m)}},inputs:{inputData:"inputData",loading:"loading",fixed:"fixed"},decls:1,vars:1,consts:[["class","center",4,"ngIf"],[1,"center"],["container",""],["data",l.$Z9`../../../assets/Loading.svg`,"type","image/svg+xml","width","150px"]],template:function(u,t){1&u&&l.YNc(0,q,5,1,"div",0),2&u&&l.Q6J("ngIf",t.loading)},dependencies:[b.O5],styles:[".center[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:9999}object[_ngcontent-%COMP%]{margin-left:50px}h1[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;padding-top:30px;font-size:20px;font-weight:700;color:#310e92;margin:0;animation:_ngcontent-%COMP%_heartBeart 1s linear infinite}@keyframes _ngcontent-%COMP%_heartBeart{0%{opacity:.3}50%{opacity:1}to{opacity:.3}}"]})},8999:(at,A,a)=>{a.r(A),a.d(A,{MainModule:()=>I});var l=a(6895),b=a(8317),x=a(5861),q=a(9751),M=a(7389),y=a(2149),u=a(5938),t=a(4650),m=a(9101),_=a(9549),T=a(4144),v=a(4006);class z{constructor(n,e){this.dialogRef=n,this.data=e}ngOnInit(){this.tempName=this.data.name}onNoClick(){this.dialogRef.close()}onYesClick(){this.dialogRef.close(this.tempName)}}z.\u0275fac=function(n){return new(n||z)(t.Y36(u.so),t.Y36(u.WI))},z.\u0275cmp=t.Xpm({type:z,selectors:[["app-edit-name"]],decls:14,vars:2,consts:[[1,"container"],[1,"header"],[1,"editor"],["appearance","outline"],[1,"input-fs"],["matInput","","rows","15","cols","30","maxlength","30",1,"input-fs",3,"ngModel","ngModelChange","keydown.enter"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","",1,"save",3,"mat-dialog-close"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Edit Name"),t.qZA()(),t.TgZ(4,"div",2)(5,"mat-form-field",3)(6,"mat-label",4),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return e.tempName=r})("keydown.enter",function(){return e.onYesClick()}),t.qZA()()(),t.TgZ(9,"div",6)(10,"button",7),t.NdJ("click",function(){return e.onNoClick()}),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",8),t._uU(13,"Save"),t.qZA()()()),2&n&&(t.xp6(8),t.Q6J("ngModel",e.tempName),t.xp6(4),t.Q6J("mat-dialog-close",e.tempName))},dependencies:[m.lW,_.KE,_.hX,T.Nt,u.ZT,v.Fj,v.JJ,v.nD,v.On],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;width:100%}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%]   .input-fs[_ngcontent-%COMP%]{font-size:1rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}@media screen and (max-width: 600px){.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%]   .input-fs[_ngcontent-%COMP%]{font-size:.75rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.75em;padding:1rem}}@media screen and (max-width: 300px){.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem .5rem}}"]});class L{constructor(n,e){this.data=n,this.dialogRef=e}close(){this.dialogRef.close()}}L.\u0275fac=function(n){return new(n||L)(t.Y36(u.WI),t.Y36(u.so))},L.\u0275cmp=t.Xpm({type:L,selectors:[["app-notify-dialog"]],decls:10,vars:1,consts:[[1,"header"],[1,"general"],["mat-button","",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"h2"),t._uU(3,"Notify"),t.qZA()(),t.TgZ(4,"div",1)(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"div")(8,"button",2),t.NdJ("click",function(){return e.close()}),t._uU(9,"Close"),t.qZA()()()()),2&n&&(t.xp6(6),t.Oqu(e.data))},dependencies:[m.lW,u.xY],styles:['@import"https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;1,300&display=swap";*[_ngcontent-%COMP%]{transition:all .2s ease-in-out}mat-dialog-content[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;padding:2rem!important;min-width:600px}mat-dialog-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;font-size:1.5rem;font-weight:600;margin:1rem 0rem;color:var(--color-4)}mat-dialog-content[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .full-width[_ngcontent-%COMP%]{width:100%;font-size:1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > mat-select[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:var(--color-1);color:var(--color-4);font-size:1rem;box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.25);margin:1rem;width:100%;border-radius:10px}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:1.5rem 1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > mat-select[_ngcontent-%COMP%]{padding:0rem 1rem;height:3rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%] > .access-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]{margin-bottom:2rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%]{padding:0rem 1rem;width:calc(100% - 2rem);max-height:140px;overflow-y:auto}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > .empty[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1rem;height:100px}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:1rem;width:inherit}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-4)}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:1rem;color:rgba(var(--color-4-rgb),.5)}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .select[_ngcontent-%COMP%]{padding-right:1rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{padding:0rem 1rem;height:2rem;background-color:var(--color-1);box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.25);border-radius:10px}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%]{width:100%}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:1rem;width:100%}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%] > .select[_ngcontent-%COMP%]{padding-right:1rem}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:var(--color-1);color:var(--color-4);font-size:1rem;font-weight:500;padding:1.5rem 1rem;box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.25)}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--color-4)}  .mat-mdc-select-trigger{height:100%}  .mat-mdc-select-value{color:var(--color-4)}@media screen and (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{min-width:100%}mat-dialog-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .full-width[_ngcontent-%COMP%]{font-size:.8rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%]{flex-direction:column}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > mat-select[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;margin:.5rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:1.25rem 1rem}mat-dialog-content[_ngcontent-%COMP%] > .search[_ngcontent-%COMP%] > .button[_ngcontent-%COMP%] > mat-select[_ngcontent-%COMP%]{width:calc(100% - 2rem);padding:0rem 1rem;height:2.5rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%]{padding:0rem .2rem;width:calc(100% - .4rem)}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > .empty[_ngcontent-%COMP%]{font-size:.8rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-direction:column}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:1rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin:.2rem 0rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.8rem}mat-dialog-content[_ngcontent-%COMP%] > .access[_ngcontent-%COMP%]   .access-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:.8rem}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%]{flex-direction:column}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9rem;font-weight:500}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}mat-dialog-content[_ngcontent-%COMP%] > .general[_ngcontent-%COMP%] > .edit-permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.8rem}}']});var w=a(7626),Pt=a(5085),lt=a(3115),bt=a(9709),F=a(6897),R=a(7556),dt=a(529),ut=a(3683),N=a(7392),Z=a(457),K=a(266);const ot={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},mt=new t.OlP("config",{providedIn:"root",factory:()=>({modules:ot})});var X=a(1481),xt=a(9770),gt=a(576);function yt(i){return!!i&&(i instanceof q.y||(0,gt.m)(i.lift)&&(0,gt.m)(i.subscribe))}var Tt=a(6805),wt=a(930);function Zt(i,n){const e="object"==typeof n;return new Promise((o,r)=>{const s=new wt.Hp({next:c=>{o(c),s.unsubscribe()},error:r,complete:()=>{e?o(n.defaultValue):r(new Tt.K)}});i.subscribe(s)})}var Et=a(727),rt=a(4968),Dt=a(7579),kt=a(6063);class Ut extends Dt.x{constructor(n=1/0,e=1/0,o=kt.l){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:o,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(o.push(n),!r&&o.push(s.now()+c)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:o,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!n.closed;c+=o?1:2)n.next(s[c]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:r}=this,s=(r?1:2)*n;if(n<1/0&&s<o.length&&o.splice(0,o.length-s),!r){const c=e.now();let d=0;for(let g=1;g<o.length&&o[g]<=c;g+=2)d=g;d&&o.splice(0,d+1)}}}var At=a(3099),pt=a(5577),ht=a(8372);function Nt(i,n){1&i&&t._UZ(0,"div",2)}function St(i,n){1&i&&t._UZ(0,"pre",2)}function It(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Nt,1,0,"div",1),t.YNc(2,St,1,0,"pre",1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.preserve),t.xp6(1),t.Q6J("ngIf",e.preserve)}}function zt(i,n){1&i&&t._UZ(0,"div",2)}function Lt(i,n){1&i&&t._UZ(0,"pre",2)}function Ft(i,n){if(1&i&&(t.ynx(0),t.YNc(1,zt,1,0,"div",1),t.YNc(2,Lt,1,0,"pre",1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.preserve),t.xp6(1),t.Q6J("ngIf",e.preserve)}}const Rt=[[["","quill-editor-toolbar",""]]],Jt=["[quill-editor-toolbar]"];function Qt(i,n){1&i&&t._UZ(0,"div",1)}function Yt(i,n){1&i&&t._UZ(0,"pre",1)}const J=(i,n)=>i||n||"html";let tt=(()=>{class i{constructor(e,o){var r=this;this.config=o,this.quill$=(0,xt.P)((0,x.Z)(function*(){if(!r.Quill){const s=r.document.addEventListener;r.document.addEventListener=r.document.__zone_symbol__addEventListener||r.document.addEventListener;const c=yield a.e(971).then(a.t.bind(a,9971,19));r.document.addEventListener=s,r.Quill=c.default?c.default:c}return r.config.customOptions?.forEach(s=>{const c=r.Quill.import(s.import);c.whitelist=s.whitelist,r.Quill.register(c,!0,r.config.suppressGlobalRegisterWarning)}),yield r.registerCustomModules(r.Quill,r.config.customModules,r.config.suppressGlobalRegisterWarning)})).pipe(function qt(i,n,e){let o,r=!1;return i&&"object"==typeof i?({bufferSize:o=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:e}=i):o=i??1/0,(0,At.B)({connector:()=>new Ut(o,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}({bufferSize:1,refCount:!0})),this.document=e.get(l.K0),this.config||(this.config={modules:ot})}getQuill(){return this.quill$}registerCustomModules(e,o,r){return(0,x.Z)(function*(){if(Array.isArray(o))for(let{implementation:s,path:c}of o)yt(s)&&(s=yield Zt(s)),e.register(c,s,r);return e})()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.zs3),t.LFG(mt,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),jt=(()=>{class i{constructor(e,o,r,s,c,d,g,P){this.elementRef=o,this.cd=r,this.domSanitizer=s,this.platformId=c,this.renderer=d,this.zone=g,this.service=P,this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new t.vpe,this.onEditorChanged=new t.vpe,this.onContentChanged=new t.vpe,this.onSelectionChanged=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.valueGetter=(p,h)=>{let f=h.querySelector(".ql-editor").innerHTML;("<p><br></p>"===f||"<div><br></div>"===f)&&(f=this.defaultEmptyValue);let C=f;const D=J(this.format,this.service.config.format);if("text"===D)C=p.getText();else if("object"===D)C=p.getContents();else if("json"===D)try{C=JSON.stringify(p.getContents())}catch{C=p.getText()}return C},this.valueSetter=(p,h)=>{const f=J(this.format,this.service.config.format);if("html"===f)return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(h=this.domSanitizer.sanitize(t.q3G.HTML,h)),p.clipboard.convert(h);if("json"===f)try{return JSON.parse(h)}catch{return[{insert:h}]}return h},this.selectionChangeHandler=(p,h,f)=>{const C=!p&&!!this.onModelTouched;!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!C||this.zone.run(()=>{null===p?this.onBlur.emit({editor:this.quillEditor,source:f}):null===h&&this.onFocus.emit({editor:this.quillEditor,source:f}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:h,range:p,source:f}),C&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(p,h,f)=>{const C=this.quillEditor.getText(),D=this.quillEditor.getContents();let k=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===k||"<div><br></div>"===k)&&(k=this.defaultEmptyValue);const U=this.trackChanges||this.service.config.trackChanges,Ot=("user"===f||U&&"all"===U)&&!!this.onModelChange;!this.onContentChanged.observed&&!Ot||this.zone.run(()=>{Ot&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:D,delta:p,editor:this.quillEditor,html:k,oldDelta:h,source:f,text:C}),this.cd.markForCheck()})},this.editorChangeHandler=(p,h,f,C)=>{if(this.onEditorChanged.observed)if("text-change"===p){const D=this.quillEditor.getText(),k=this.quillEditor.getContents();let U=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===U||"<div><br></div>"===U)&&(U=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:k,delta:h,editor:this.quillEditor,event:p,html:U,oldDelta:f,source:C,text:D}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:p,oldRange:f,range:h,source:C}),this.cd.markForCheck()})},this.document=e.get(l.K0)}static normalizeClassNames(e){return e.trim().split(" ").reduce((r,s)=>{const c=s.trim();return c&&r.push(c),r},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){(0,l.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,pt.z)(e=>{const o=[this.service.registerCustomModules(e,this.customModules)],r=this.beforeRender??this.service.config.beforeRender;return r&&o.push(r()),Promise.all(o).then(()=>e)})).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const o=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=Object.assign({},this.modules||this.service.config.modules);o?r.toolbar=o:void 0===r.toolbar&&(r.toolbar=ot.toolbar);let s=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===s&&(s="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(f=>{this.renderer.setStyle(this.editorElem,f,this.styles[f])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(f=>{const C=e.import(f.import);C.whitelist=f.whitelist,e.register(C,!0)});let c=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;c||(c=this.service.config.bounds?this.service.config.bounds:this.document.body);let d=this.debug;!d&&!1!==d&&this.service.config.debug&&(d=this.service.config.debug);let g=this.readOnly;!g&&!1!==this.readOnly&&(g=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let P=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(P=this.service.config.defaultEmptyValue);let p=this.scrollingContainer;!p&&null!==this.scrollingContainer&&(p=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let h=this.formats;if(!h&&void 0===h&&(h=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:c,debug:d,formats:h,modules:r,placeholder:s,readOnly:g,defaultEmptyValue:P,scrollingContainer:p,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const C=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");C?.dataset&&(C.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===J(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const C=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(C,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){const o=e.styles.currentValue,r=e.styles.previousValue;r&&Object.keys(r).forEach(s=>{this.renderer.removeStyle(this.editorElem,s)}),o&&Object.keys(o).forEach(s=>{this.renderer.setStyle(this.editorElem,s,this.styles[s])})}if(e.classes){const o=e.classes.currentValue,r=e.classes.previousValue;r&&this.removeClasses(r),o&&this.addClasses(o)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){i.normalizeClassNames(e).forEach(o=>{this.renderer.addClass(this.editorElem,o)})}removeClasses(e){i.normalizeClassNames(e).forEach(o=>{this.renderer.removeClass(this.editorElem,o)})}writeValue(e){if(this.filterNull&&null===e||(this.content=e,!this.quillEditor))return;const o=J(this.format,this.service.config.format),r=this.valueSetter(this.quillEditor,e);if(this.compareValues){const s=this.quillEditor.getContents();if(JSON.stringify(s)===JSON.stringify(r))return}e?"text"===o?this.quillEditor.setText(e):this.quillEditor.setContents(r):this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;const e={};let o=!0;const r=this.quillEditor.getText(),s=this.trimOnValidation?r.trim().length:1===r.length&&0===r.trim().length?0:r.length-1,c=this.quillEditor.getContents().ops,d=c&&1===c.length&&["\n",""].includes(c[0].insert);return this.minLength&&s&&s<this.minLength&&(e.minLengthError={given:s,minLength:this.minLength},o=!1),this.maxLength&&s>this.maxLength&&(e.maxLengthError={given:s,maxLength:this.maxLength},o=!1),this.required&&!s&&d&&(e.requiredError={empty:!0},o=!1),o?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new Et.w0,this.subscription.add((0,rt.R)(this.quillEditor,"selection-change").subscribe(([r,s,c])=>{this.selectionChangeHandler(r,s,c)}));let e=(0,rt.R)(this.quillEditor,"text-change"),o=(0,rt.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(e=e.pipe((0,ht.b)(this.debounceTime)),o=o.pipe((0,ht.b)(this.debounceTime))),this.subscription.add(e.subscribe(([r,s,c])=>{this.textChangeHandler(r,s,c)})),this.subscription.add(o.subscribe(([r,s,c,d])=>{this.editorChangeHandler(r,s,c,d)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.zs3),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(X.H7),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(tt))},i.\u0275dir=t.lG2({type:i,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[t.TTD]}),i})(),ft=(()=>{class i extends jt{constructor(e,o,r,s,c,d,g,P){super(e,o,r,s,c,d,g,P)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.zs3),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(X.H7),t.Y36(t.Lbi),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(tt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["quill-editor"]],standalone:!0,features:[t._Bn([{multi:!0,provide:v.JU,useExisting:(0,t.Gpc)(()=>i)},{multi:!0,provide:v.Cf,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj,t.jDz],ngContentSelectors:Jt,decls:3,vars:2,consts:[[4,"ngIf"],["quill-editor-element","",4,"ngIf"],["quill-editor-element",""]],template:function(e,o){1&e&&(t.F$t(Rt),t.YNc(0,It,3,2,"ng-container",0),t.Hsn(1),t.YNc(2,Ft,3,2,"ng-container",0)),2&e&&(t.Q6J("ngIf","top"!==o.toolbarPosition),t.xp6(2),t.Q6J("ngIf","top"===o.toolbarPosition))},dependencies:[l.ez,l.O5],styles:["[_nghost-%COMP%]{display:inline-block}"]}),i})(),Vt=(()=>{class i{constructor(e,o){this.sanitizer=e,this.service=o,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(e){if(e.theme?this.themeClass=`ql-${e.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow")} ngx-quill-view-html`:this.theme||(this.themeClass=`ql-${this.service.config.theme?this.service.config.theme:"snow"} ngx-quill-view-html`),e.content){const o=e.content.currentValue,r=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=r?o:this.sanitizer.bypassSecurityTrustHtml(o)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(X.H7),t.Y36(tt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.qZA()),2&e&&(t.Q6J("ngClass",o.themeClass),t.xp6(1),t.Q6J("innerHTML",o.innerHTML,t.oJD))},dependencies:[l.ez,l.mk],styles:[".ql-container.ngx-quill-view-html{border:0}\n"],encapsulation:2}),i})(),$t=(()=>{class i{constructor(e,o,r,s,c,d){this.elementRef=e,this.renderer=o,this.zone=r,this.service=s,this.domSanitizer=c,this.platformId=d,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new t.vpe,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(g,P)=>{const p=J(this.format,this.service.config.format);let h=P;if("text"===p)g.setText(h);else{if("html"===p)([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(P=this.domSanitizer.sanitize(t.q3G.HTML,P)),h=g.clipboard.convert(P);else if("json"===p)try{h=JSON.parse(P)}catch{h=[{insert:P}]}g.setContents(h)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(e){this.quillEditor&&e.content&&this.valueSetter(this.quillEditor,e.content.currentValue)}ngAfterViewInit(){(0,l.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,pt.z)(e=>{const o=[this.service.registerCustomModules(e,this.customModules)],r=this.beforeRender??this.service.config.beforeRender;return r&&o.push(r()),Promise.all(o).then(()=>e)})).subscribe(e=>{const o=Object.assign({},this.modules||this.service.config.modules);o.toolbar=!1,this.customOptions.forEach(d=>{const g=e.import(d.import);g.whitelist=d.whitelist,e.register(g,!0)});let r=this.debug;!r&&!1!==r&&this.service.config.debug&&(r=this.service.config.debug);let s=this.formats;!s&&void 0===s&&(s=this.service.config.formats?Object.assign({},this.service.config.formats):null===this.service.config.formats?null:void 0);const c=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new e(this.editorElem,{debug:r,formats:s,modules:o,readOnly:!0,strict:this.strict,theme:c})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(tt),t.Y36(X.H7),t.Y36(t.Lbi))},i.\u0275cmp=t.Xpm({type:i,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:2,consts:[["quill-view-element","",4,"ngIf"],["quill-view-element",""]],template:function(e,o){1&e&&(t.YNc(0,Qt,1,0,"div",0),t.YNc(1,Yt,1,0,"pre",0)),2&e&&(t.Q6J("ngIf",!o.preserve),t.xp6(1),t.Q6J("ngIf",o.preserve))},dependencies:[l.ez,l.O5],styles:[".ql-container.ngx-quill-view{border:0}\n"],encapsulation:2}),i})(),Ht=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:mt,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[ft,$t,Vt]}),i})();const Gt=["quillEditor"];function Bt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openShareDialog())}),t.TgZ(1,"mat-icon"),t._uU(2,"share"),t.qZA()()}}function Wt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openEditNameDialog())}),t._uU(1,"Edit Name"),t.qZA()}}function Kt(i,n){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.currentDoc.name)}}function Xt(i,n){if(1&i&&(t._uU(0),t.ALo(1,"async")),2&i){const e=t.oxw();let o;t.Oqu(null==(o=t.lcZ(1,1,e.store$))||null==o.document?null:o.document.name)}}function te(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openEditNameDialog())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function ee(i,n){if(1&i&&t._UZ(0,"img",18),2&i){const e=n.$implicit;t.Q6J("src",e.photoURL,t.LSH)("matTooltip",e.displayName)}}function ne(i,n){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,ee,1,2,"img",17),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.users)}}const ie=function(){return[]};class Q{constructor(n,e,o,r,s,c,d,g,P){this._socket=n,this.activateRoute=e,this.documentService=o,this.dialogService=r,this.userService=s,this.store=c,this.authService=d,this.httpClient=g,this.router=P,this.initDocument=new q.y,this.showNotification=!1,this.store$=this.store.select("doc"),this.users=[],this.isSocketConnected=!1,this.canSave=!1,this.storage=(0,w.cF)(),this.quillModule={toolbar:{container:[["bold","italic","underline","strike"],[{header:1},{header:2},{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]},{header:[1,2,3,4,5,6,!1]},{font:[]}],[{align:[]},"clean","link","image"]]}}}ngOnInit(){this.activateRoute.queryParams.subscribe(n=>{this.roomId=n.id}),this.handleSocketEvents(this.roomId),this.store.dispatch(M.R.get({id:this.roomId})),this.store$.subscribe(n=>{if(n.document){if(this.currentDoc=n.document,500===n.error.status){if(this.showNotification)return;return this.showNotification=!0,void this.openShowNotification("You don't have permission to access this document")}this.currentDoc.uid&&this.currentDoc.contentPath&&(this.storageDocument=(0,w.iH)(this.storage,`${this.currentDoc.uid}/documents/${this.currentDoc.contentPath}`),(0,w.Jt)(this.storageDocument).then(e=>{this.initDocument=this.listenForFile(e)}))}}),window.addEventListener("beforeunload",()=>{this.beforeleave()})}openShowNotification(n){this.dialogService.open(L,{width:"500px",data:n}).afterClosed().subscribe(()=>{this.back()})}ngAfterViewInit(){this.setup()}ngOnDestroy(){this.beforeleave()}handleSocketEvents(n){this.roomId=n,this._socket.on("connect",()=>{this.handleSocketConnection()}),this._socket.connect()}handleSocketConnection(){var n=this;return(0,x.Z)(function*(){if(n.isSocketConnected)return;console.log("connected"),n.isSocketConnected=!0;let e=yield n.userService.getUser(n.authService.currentUser?.uid);n.listenRoomChange().subscribe(o=>{null!=o.users&&(n.users=o.users)}),n._socket.emit("join-room",{roomId:n.roomId,user:e}),n.watchDogListener().subscribe(o=>{if(o.uid!==n.authService.currentUser?.uid&&!o.canEdit.includes(n.authService.currentUser?.uid)&&!o.canView.includes(n.authService.currentUser?.uid)){if(n.showNotification)return;n.showNotification=!0,n.openShowNotification("Your permission to access this document were removed ")}})})()}setup(){var n=this;return(0,x.Z)(function*(){setTimeout(()=>{n.editor.quillEditor.on("text-change",(o,r,s)=>{"user"===s&&n.sendUpdateData(o)}),n.processData()},1e3)})()}saveFile(){this.canSave&&(0,w.sf)(this.storageDocument,JSON.stringify(this.editor.quillEditor.getContents()),"raw")}processData(){this.initDocument.subscribe(n=>{this.canSave=!0,this.defaultData=n,this.editor.quillEditor.updateContents(n)}),this.listenForChanged().subscribe(n=>{this.defaultData=n,this.editor.quillEditor.updateContents(n)}),this.saveInterval=setInterval(()=>{this._socket.emit("watch-dog",{docId:this.roomId}),this.saveFile()},3e3)}sendUpdateData(n){this._socket.emit("send-data",{roomId:this.roomId,data:n})}listenForFile(n){return this.httpClient.get(n,{responseType:"json"})}listenForChanged(){return this._socket.fromEvent("receive-data")}listenRoomChange(){return this._socket.fromEvent("update-room")}openEditNameDialog(){this.currentDoc&&this.dialogService.open(z,{width:"500px",data:this.currentDoc.name}).afterClosed().subscribe(o=>{o&&this.store.dispatch(M.R.update({id:this.currentDoc.id,uid:this.authService.currentUser?.uid,updateField:"name",updateValue:o}))})}openShareDialog(){this.dialogService.open(y.p,{data:this.roomId}).afterClosed().subscribe(e=>{this._socket.emit("watch-dog",{docId:this.roomId})})}back(){this.router.navigate(["/main"])}beforeleave(){this._socket.emit("leave-room",{roomId:this.roomId,user:this.authService.currentUser?.uid}),clearInterval(this.saveInterval),this._socket.disconnect(),this.saveFile()}unloadHandler(n){var e=this;return(0,x.Z)(function*(){n.preventDefault(),e.beforeleave()})()}watchDogListener(){return this._socket.fromEvent("watch-dog-message")}}Q.\u0275fac=function(n){return new(n||Q)(t.Y36(Pt.s),t.Y36(b.gz),t.Y36(lt.Z),t.Y36(u.uw),t.Y36(bt.K),t.Y36(F.yh),t.Y36(R.e),t.Y36(dt.eN),t.Y36(b.F0))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["app-document"]],viewQuery:function(n,e){if(1&n&&t.Gf(Gt,5),2&n){let o;t.iGM(o=t.CRH())&&(e.editor=o.first)}},hostBindings:function(n,e){1&n&&t.NdJ("beforeunload",function(r){return e.unloadHandler(r)},!1,t.Jf7)},decls:31,vars:16,consts:[[1,"back-share"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"filename"],["mat-icon-button","",1,"button-expand",3,"matMenuTriggerFor"],["buttonExpand","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"spacer"],[1,"name"],[4,"ngIf","ngIfElse"],["diffName",""],["mat-icon-button","",3,"disabled","click"],["class","watcher",4,"ngIf"],[3,"modules"],["quillEditor",""],[1,"watcher"],[3,"src","matTooltip",4,"ngFor","ngForOf"],[3,"src","matTooltip"]],template:function(n,e){if(1&n&&(t.TgZ(0,"mat-toolbar")(1,"div",0)(2,"button",1),t.NdJ("click",function(){return e.back()}),t.TgZ(3,"mat-icon"),t._uU(4," arrow_back "),t.qZA()(),t.YNc(5,Bt,3,0,"button",2),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",3)(8,"span")(9,"button",4)(10,"mat-icon"),t._uU(11,"expand_more"),t.qZA()(),t.TgZ(12,"mat-menu",null,5),t.YNc(14,Wt,2,0,"button",6),t.ALo(15,"async"),t.TgZ(16,"button",7),t.NdJ("click",function(){return e.saveFile()}),t._uU(17,"Save File"),t.qZA()()(),t._UZ(18,"span",8),t.TgZ(19,"span",9),t.YNc(20,Kt,2,1,"ng-container",10),t.YNc(21,Xt,2,3,"ng-template",null,11,t.W1O),t.qZA(),t.YNc(23,te,3,0,"button",2),t.ALo(24,"async"),t.TgZ(25,"button",12),t.NdJ("click",function(){return e.saveFile()}),t.TgZ(26,"mat-icon"),t._uU(27,"save"),t.qZA()()(),t.YNc(28,ne,2,1,"div",13),t.qZA(),t._UZ(29,"quill-editor",14,15)),2&n){const o=t.MAs(13),r=t.MAs(22);let s,c,d;t.xp6(5),t.Q6J("ngIf",(null==(s=t.lcZ(6,9,e.store$))||null==s.document?null:s.document.uid)===(null==e.authService.currentUser?null:e.authService.currentUser.uid)),t.xp6(4),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("ngIf",(null==(c=t.lcZ(15,11,e.store$))||null==c.document?null:c.document.uid)===(null==e.authService.currentUser?null:e.authService.currentUser.uid)),t.xp6(6),t.Q6J("ngIf",e.currentDoc)("ngIfElse",r),t.xp6(3),t.Q6J("ngIf",(null==(d=t.lcZ(24,13,e.store$))||null==d.document?null:d.document.uid)===(null==e.authService.currentUser?null:e.authService.currentUser.uid)),t.xp6(2),t.Q6J("disabled",!e.canSave),t.xp6(3),t.Q6J("ngIf",e.users!=t.DdM(15,ie)),t.xp6(1),t.Q6J("modules",e.quillModule)}},dependencies:[l.sg,l.O5,ut.Ye,N.Hw,m.RK,Z.VK,Z.OP,Z.p6,K.gM,ft,l.Ov],styles:[".mat-toolbar[_ngcontent-%COMP%]{width:100%;background-color:var(--color-1);position:fixed;display:flex;align-items:center;justify-content:space-between;top:0;z-index:1000}.mat-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:0rem 2rem}.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-weight:500;color:var(--color-4);height:48px!important;width:48px!important;padding:auto;margin-left:10px}.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px;line-height:24px;font-weight:500}.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-weight:700}.back-share[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.filename[_ngcontent-%COMP%]{display:flex;align-items:center}.filename[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.filename[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--color-4);max-width:200px;overflow:hidden;text-overflow:ellipsis}.filename[_ngcontent-%COMP%] > .spacer[_ngcontent-%COMP%]{width:116px}  .mat-drawer-backdrop{background-color:inherit!important}.watcher[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.watcher[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:0 -10px;background-color:azure}.button-expand[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 900px){.mat-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:0rem .5rem}.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-weight:500;color:var(--color-4);height:32px!important;width:32px!important;padding:0;margin-left:8px}.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;line-height:16px}.filename[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{font-size:.8rem}.filename[_ngcontent-%COMP%] > .spacer[_ngcontent-%COMP%]{width:80px}.watcher[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.watcher[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:40px;height:40px;margin:0 -8px}}@media screen and (max-width: 600px){.back-share[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:0}.mat-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0;margin:0rem}.watcher[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:28px;height:28px;margin:0 -6px}}  .mat-mdc-tooltip{font-size:.75rem!important}@media screen and (max-width: 500px){.filename[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:none!important}.filename[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{max-width:125px}.filename[_ngcontent-%COMP%] > .spacer[_ngcontent-%COMP%]{width:0}.watcher[_ngcontent-%COMP%]{display:none!important}.button-expand[_ngcontent-%COMP%]{display:block}}"]});const _t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let et;const oe=new Uint8Array(16);function re(){if(!et&&(et=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!et))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(oe)}const O=[];for(let i=0;i<256;++i)O.push((i+256).toString(16).slice(1));const Mt=function se(i,n,e){if(_t.randomUUID&&!n&&!i)return _t.randomUUID();const o=(i=i||{}).random||(i.rng||re)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){e=e||0;for(let r=0;r<16;++r)n[e+r]=o[r];return n}return function Ct(i,n=0){return(O[i[n+0]]+O[i[n+1]]+O[i[n+2]]+O[i[n+3]]+"-"+O[i[n+4]]+O[i[n+5]]+"-"+O[i[n+6]]+O[i[n+7]]+"-"+O[i[n+8]]+O[i[n+9]]+"-"+O[i[n+10]]+O[i[n+11]]+O[i[n+12]]+O[i[n+13]]+O[i[n+14]]+O[i[n+15]]).toLowerCase()}(o)};var ce=a(7855),st=a(6257),vt=a(1594);const ae=["stepper"];function le(i,n){1&i&&(t.TgZ(0,"span",18),t._uU(1,"Fill out document name"),t.qZA())}function de(i,n){1&i&&(t.TgZ(0,"span",18),t._uU(1,"Creating document"),t.qZA())}function ue(i,n){1&i&&(t.TgZ(0,"span",18),t._uU(1,"Done"),t.qZA())}class Y{constructor(n,e,o,r,s){this._formBuilder=n,this.store=e,this.authService=o,this.dialogRef=r,this.documentService=s,this.store$=this.store.select("doc"),this.inProgress=!1,this.storage=(0,w.cF)(),this.firstFormGroup=this._formBuilder.group({firstCtrl:["",v.kI.required]})}close(){1!=this.inProgress&&this.dialogRef.close()}createDoc(){var n=this;return(0,x.Z)(function*(){if(""==n.firstFormGroup.value.firstCtrl?.trim())return;n.inProgress=!0,n.stepper.next();let e=Date.now().toString(),o=n.createDocModel(),r=Mt();n.storageDocument=(0,w.iH)(n.storage,`${n.authService.currentUser?.uid}/documents/${r}.json`),(0,w.sf)(n.storageDocument,JSON.stringify({}),"raw").then(()=>{Object.assign(o,{contentPath:r+".json",dateCreated:e,dateModified:e}),n.inProgress=!1,n.stepper.next(),n.store.dispatch(M.R.create({document:o})),console.log(o)}).catch(s=>{n.stepper.previous(),n.inProgress=!1})})()}createDocModel(){return{id:Mt(),name:this.firstFormGroup.value.firstCtrl,contentPath:"",isDelete:!1,isPublic:!1,dateCreated:"0",dateModified:"0",canEdit:[],canView:[],forkedFrom:"",stars:0,uid:this.authService.currentUser?.uid}}}Y.\u0275fac=function(n){return new(n||Y)(t.Y36(v.qu),t.Y36(F.yh),t.Y36(R.e),t.Y36(ce.zj),t.Y36(lt.Z))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-create-document"]],viewQuery:function(n,e){if(1&n&&t.Gf(ae,5),2&n){let o;t.iGM(o=t.CRH())&&(e.stepper=o.first)}},decls:33,vars:4,consts:[[1,"container"],[1,"close"],["mat-icon-button","",3,"click"],["matTooltip","Close"],[1,"header"],[1,"step"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","outline",1,"input-container"],[1,"input-fs"],["matInput","","placeholder","Enter document name","formControlName","firstCtrl","required","",1,"input-fs"],["align","end"],["mat-button","","mat-dialog-close","",1,"default-btn"],["mat-button","",1,"default-btn",3,"click"],[3,"inputData","loading"],[1,"step-label"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return e.close()}),t.TgZ(3,"mat-icon",3),t._uU(4,"close"),t.qZA()()(),t.TgZ(5,"div",4)(6,"h2"),t._uU(7,"Create new document"),t.qZA()(),t.TgZ(8,"div",5)(9,"mat-stepper",6,7)(11,"mat-step",8)(12,"form",9),t.YNc(13,le,2,0,"ng-template",10),t.TgZ(14,"mat-form-field",11)(15,"mat-label",12),t._uU(16,"Document name"),t.qZA(),t._UZ(17,"input",13),t.qZA(),t.TgZ(18,"mat-dialog-actions",14)(19,"button",15),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",16),t.NdJ("click",function(){return e.createDoc()}),t._uU(22,"Create"),t.qZA()()()(),t.TgZ(23,"mat-step"),t.YNc(24,de,2,0,"ng-template",10),t._UZ(25,"app-loading",17),t.qZA(),t.TgZ(26,"mat-step"),t.YNc(27,ue,2,0,"ng-template",10),t.TgZ(28,"p"),t._uU(29,"The document has been created !"),t.qZA(),t.TgZ(30,"mat-dialog-actions",14)(31,"button",16),t.NdJ("click",function(){return e.close()}),t._uU(32,"Ok"),t.qZA()()()()()()),2&n&&(t.xp6(11),t.Q6J("stepControl",e.firstFormGroup),t.xp6(1),t.Q6J("formGroup",e.firstFormGroup),t.xp6(13),t.Q6J("inputData","Please wait")("loading",!0))},dependencies:[N.Hw,m.lW,m.RK,_.KE,_.hX,T.Nt,u.ZT,u.H8,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,st.C0,st.VY,st.Vq,K.gM,vt.N],styles:[".container[_ngcontent-%COMP%]{padding:1rem;width:500px}.close[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{display:flex;align-items:center}.close[_ngcontent-%COMP%]{justify-content:flex-end}.header[_ngcontent-%COMP%]{justify-content:center;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:var(--color-4)}.step[_ngcontent-%COMP%]{width:100%}.step[_ngcontent-%COMP%] > mat-stepper[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;color:var(--color-4)}.step[_ngcontent-%COMP%] > mat-stepper[_ngcontent-%COMP%]   .input-fs[_ngcontent-%COMP%]{font-size:1rem}.step[_ngcontent-%COMP%]   .default-btn[_ngcontent-%COMP%]{font-weight:600;padding:1rem 2rem;background-color:var(--color-1);color:var(--color-4);box-shadow:1px 1px 1px 1px rgba(var(--color-4-rgb),.25)}.step[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:calc(100% - 2rem)}}@media screen and (max-width: 500px){.header[_ngcontent-%COMP%]{margin-bottom:.5rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.step[_ngcontent-%COMP%] > mat-stepper[_ngcontent-%COMP%]{width:100%}.step[_ngcontent-%COMP%] > mat-stepper[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{display:none}.step[_ngcontent-%COMP%]   .default-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem}.step[_ngcontent-%COMP%]   .input-fs[_ngcontent-%COMP%]{font-size:.75rem}}@media screen and (max-width: 400px){.container[_ngcontent-%COMP%]{width:100%;padding:0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.95rem}.step[_ngcontent-%COMP%]   .default-btn[_ngcontent-%COMP%]{padding:.5rem;font-size:.65rem}}"]});class j{constructor(n,e){this.dialogRef=n,this.data=e,this.tempConfirm={confirm:!1},this.temp={confirm:!0}}onNoClick(){this.dialogRef.close()}onYesClick(){this.tempConfirm.confirm=!0,this.dialogRef.close(this.tempConfirm)}}j.\u0275fac=function(n){return new(n||j)(t.Y36(u.so),t.Y36(u.WI))},j.\u0275cmp=t.Xpm({type:j,selectors:[["app-comfirm-delete"]],decls:11,vars:2,consts:[[1,"container"],[1,"header"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","",1,"save",3,"mat-dialog-close","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Pernamently delete document"),t.qZA(),t.TgZ(4,"h1"),t._uU(5),t.qZA()(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(){return e.onNoClick()}),t._uU(8,"Cancel"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return e.onYesClick()}),t._uU(10,"Yes"),t.qZA()()()),2&n&&(t.xp6(5),t.hij(" ",e.data.doc," ?"),t.xp6(4),t.Q6J("mat-dialog-close",e.tempConfirm))},dependencies:[m.lW,u.ZT],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem;text-align:center}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:1rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}"]});class E{constructor(){}convertDateTime(n){let e=new Date(parseInt(n)),o=e.getHours()>=10?e.getHours():"0"+e.getHours(),r=e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes();return e.getDate()==(new Date).getDate()?`${o}:${r} Today`:`${o}:${r} ${e.getDate()>=10?e.getDate():"0"+e.getDate()}/${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}/${e.getFullYear()}`}getDate(n){let e=new Date(parseInt(n));return`${e.getDate()>=10?e.getDate():"0"+e.getDate()}/${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}/${e.getFullYear()}`}}E.\u0275fac=function(n){return new(n||E)},E.\u0275prov=t.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"});var me=a(7009),V=a(6338);class ${constructor(){this.inputStatus={type:"error",message:"Error",icon:"error",stacked:!1}}}function ge(i,n){1&i&&(t.TgZ(0,"div",6),t._UZ(1,"app-loading",7),t.qZA()),2&i&&(t.xp6(1),t.Q6J("inputData","Getting your documents")("loading",!0))}function pe(i,n){1&i&&(t.TgZ(0,"div",8),t._UZ(1,"app-status"),t.qZA())}function he(i,n){1&i&&(t.TgZ(0,"button",21)(1,"mat-icon",22),t._uU(2,"share"),t.qZA()())}function fe(i,n){1&i&&(t.TgZ(0,"button",21)(1,"mat-icon"),t._uU(2,"star"),t.qZA()())}function _e(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.changeDocDeleted(r.id,!0))}),t.TgZ(1,"mat-icon",24),t._uU(2,"close"),t.qZA()()}}function Ce(i,n){if(1&i&&(t.TgZ(0,"div",18)(1,"div"),t.YNc(2,he,3,0,"button",19),t.YNc(3,fe,3,0,"button",19),t.qZA(),t.TgZ(4,"div"),t.YNc(5,_e,3,0,"button",20),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf","shared"!=e.currentRoute),t.xp6(1),t.Q6J("ngIf","shared"!=e.currentRoute),t.xp6(2),t.Q6J("ngIf","shared"!==e.currentRoute)}}function Me(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",18)(1,"div")(2,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.changeDocDeleted(r.id,!1))}),t.TgZ(3,"mat-icon",25),t._uU(4,"settings_backup_restore"),t.qZA()()(),t.TgZ(5,"div")(6,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.openDeleteDialog(r))}),t.TgZ(7,"mat-icon",24),t._uU(8,"close"),t.qZA()()()()}}function ve(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",11),t.YNc(1,Ce,6,3,"div",12),t.YNc(2,Me,9,0,"div",12),t.TgZ(3,"div",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.navigateToDoc(s.id))}),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.navigateToDoc(s.id))}),t.TgZ(6,"div")(7,"span",16),t._uU(8),t.qZA(),t.TgZ(9,"span",17)(10,"span"),t._uU(11,"Created:"),t.TgZ(12,"span"),t._uU(13),t.qZA()(),t._UZ(14,"br"),t.TgZ(15,"span"),t._uU(16,"Modify:"),t.TgZ(17,"span"),t._uU(18),t.qZA()()()()()()}if(2&i){const e=n.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.isDelete),t.xp6(1),t.Q6J("ngIf",e.isDelete),t.xp6(6),t.Oqu(e.name),t.xp6(5),t.Oqu(o.shareFunctionService.convertDateTime(e.dateCreated)),t.xp6(5),t.Oqu(o.shareFunctionService.convertDateTime(e.dateCreated))}}function Oe(i,n){if(1&i&&(t.TgZ(0,"div",9),t.YNc(1,ve,19,5,"div",10),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngForOf",null==(o=t.lcZ(2,1,e.doc$))?null:o.documents)}}$.\u0275fac=function(n){return new(n||$)},$.\u0275cmp=t.Xpm({type:$,selectors:[["app-status"]],inputs:{inputStatus:"inputStatus"},decls:4,vars:0,consts:[[1,"container"],["aria-hidden","false","fontIcon","error",1,"icon"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"mat-icon",1),t.TgZ(2,"h1"),t._uU(3,"Can't get data"),t.qZA()())},dependencies:[N.Hw],styles:[".container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:9999}.icon[_ngcontent-%COMP%]{font-size:3rem;width:5%;height:8%;color:var(--color-2)}"]});class H{constructor(n,e,o,r,s,c,d){var g=this;this.activateRoute=n,this.authService=e,this.store=o,this.dialogService=r,this.shareFunctionService=s,this._snackBar=c,this.router=d,this.doc$=this.store.select("doc"),this.store$=this.store.select("doc"),this.inProgress=!1,this.currentRoute="",this.storage=(0,w.cF)(),this.tempSub=this.activateRoute.url.subscribe(function(){var P=(0,x.Z)(function*(p){if(null!=g.authService.auth.currentUser)switch(p[1].path){case"owned":g.currentRoute="owned",g.store.dispatch(M.R.getAll());break;case"bin":g.currentRoute="bin",g.store.dispatch(M.R.getDeleted());break;case"shared":g.currentRoute="shared",g.store.dispatch(M.R.getShared())}});return function(p){return P.apply(this,arguments)}}())}ngOnInit(){}ngOnDestroy(){try{this.tempSub.unsubscribe()}catch{}}openCreateDialog(){this.dialogService.open(Y,{})}navigateToDoc(n){this.router.navigate(["main/document/edit"],{queryParams:{id:n}})}openDeleteDialog(n){this.dialogService.open(j,{width:"500px",data:{doc:n.name}}).afterClosed().subscribe(o=>{o&&o.confirm&&(this.store.dispatch(M.R.delete({doc:n})),this.storageRef=(0,w.iH)(this.storage,`${n.uid}/documents/${n.contentPath}`),(0,w.oq)(this.storageRef))})}changeDocDeleted(n,e){if(this.inProgress)return;let o=this.store$.subscribe(r=>{if(!this.inProgress&&r.inProcess)if(r.error)this.inProgress=!1;else try{o.unsubscribe(),this.inProgress=!1,this._snackBar.open("Document has been move to "+(e?"Recycle Bin":"My Documents"),"Close")}catch{this._snackBar.open("Document has been move to "+(e?"Recycle Bin":"My Documents"),"Close")}else this.inProgress=r.inProcess});this.store.dispatch(M.R.update({id:n,uid:this.authService.auth.currentUser?.uid,updateField:"isDelete",updateValue:e}))}}H.\u0275fac=function(n){return new(n||H)(t.Y36(b.gz),t.Y36(R.e),t.Y36(F.yh),t.Y36(u.uw),t.Y36(E),t.Y36(me.ux),t.Y36(b.F0))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-list"]],decls:17,vars:13,consts:[[1,"container"],["class","status-container",4,"ngIf"],["class","status-container-status",4,"ngIf"],[1,"tab-container"],["mat-button","","matTooltip","Create",3,"click"],["class","main-container",4,"ngIf"],[1,"status-container"],[3,"inputData","loading"],[1,"status-container-status"],[1,"main-container"],["class","item-container",4,"ngFor","ngForOf"],[1,"item-container"],["class","icon-container",4,"ngIf"],[1,"thumbnail",3,"click"],["src","../../../../../assets/Logo.svg","alt","",1,"doc-img"],[1,"item-info",3,"click"],["matListItemTitle","",1,"title"],[1,"time"],[1,"icon-container"],["mat-icon-button","",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button",""],["matTooltip","Edit"],["mat-icon-button","",3,"click"],["matTooltip","Delete"],["matTooltip","Restore"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,ge,2,2,"div",1),t.ALo(2,"async"),t.YNc(3,pe,2,0,"div",2),t.ALo(4,"async"),t.ALo(5,"async"),t.TgZ(6,"div",3)(7,"h2"),t._uU(8,"All Document"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return e.openCreateDialog()}),t.TgZ(10,"mat-icon"),t._uU(11,"add_circle"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"New Document"),t.qZA()()(),t.YNc(14,Oe,3,3,"div",5),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA()),2&n){let o,r,s;t.xp6(1),t.Q6J("ngIf",1==(null==(o=t.lcZ(2,3,e.doc$))?null:o.loading)),t.xp6(2),t.Q6J("ngIf",0==(null==(r=t.lcZ(4,5,e.doc$))?null:r.loading)&&""!=(null==(r=t.lcZ(5,7,e.doc$))?null:r.error)),t.xp6(11),t.Q6J("ngIf",0==(null==(s=t.lcZ(15,9,e.doc$))?null:s.loading)&&""==(null==(s=t.lcZ(16,11,e.doc$))?null:s.error))}},dependencies:[l.sg,l.O5,N.Hw,m.lW,m.RK,V.sL,K.gM,vt.N,$,l.Ov],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%}.tab-container[_ngcontent-%COMP%]{width:calc(100% - 6rem);display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:1rem 3rem}.tab-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .tab-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--color-4)}.tab-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.tab-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;background-color:var(--color-1);box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.25)}.tab-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.tab-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem}.main-container[_ngcontent-%COMP%], .main-container-recently[_ngcontent-%COMP%]{display:grid;padding:10px;grid-template-columns:repeat(auto-fit,350px);gap:10px}.item-container[_ngcontent-%COMP%]{background-color:var(--color-1);border-radius:10px;box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.25);width:100%;transition:all .2s ease-in-out}.item-container[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem}.item-container[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{color:var(--color-4)}.item-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{background-color:#fff;padding:5rem}.item-container[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding:1rem}.item-container[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .item-container[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.item-container[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--color-4);font-size:1.2rem;font-weight:600;justify-content:center;margin-bottom:1rem}.item-container[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#00000080;font-size:.7rem;font-weight:500;justify-content:space-between}.item-container[_ngcontent-%COMP%]:hover{cursor:pointer;animation:_ngcontent-%COMP%_dynamic .5s ease-in-out}.item-container[_ngcontent-%COMP%]:active{cursor:pointer;filter:brightness(.9)}@media screen and (max-width: 768px){.tab-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;width:100%;margin:0rem 10px}.tab-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:1rem;margin-bottom:1rem}.tab-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1rem}.main-container[_ngcontent-%COMP%], .main-container-recently[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,250px);gap:5px}.item-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{background-color:#fff;padding:2rem}.item-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1rem}}@keyframes _ngcontent-%COMP%_dynamic{0%{transform:scale(1);filter:brightness(1)}50%{transform:scale(1.005);filter:brightness(1.01)}to{transform:scale(1);filter:brightness(1)}}"]});var nt=a(9287),it=a(7084);function Pe(i,n){1&i&&(t.TgZ(0,"span",27),t._uU(1,"You have an invitation"),t.qZA())}function be(i,n){1&i&&(t.TgZ(0,"span",27),t._uU(1,"Invitation Accepted"),t.qZA())}function xe(i,n){1&i&&(t.TgZ(0,"span",27),t._uU(1,"Invitation Rejected"),t.qZA())}function ye(i,n){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("You are invited in document ",e.doc.name," by ",e.sender.displayName,"")}}function Te(i,n){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.sender.displayName," has accepted your invitation to ",e.doc.name," ")}}function we(i,n){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.sender.displayName," has rejected your invitation to ",e.doc.name," ")}}function Ze(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",28),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.acceptInvite(r.id,r.right,r.doc.id))}),t._uU(2,"Accept"),t.qZA(),t.TgZ(3,"button",29),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.declineInvite(r.id,r.right,r.doc.id))}),t._uU(4,"Reject"),t.qZA()()}}function Ee(i,n){if(1&i&&(t.TgZ(0,"mat-expansion-panel",19)(1,"mat-expansion-panel-header")(2,"div",20)(3,"span",21)(4,"span",22),t._uU(5),t.qZA(),t._UZ(6,"span",15),t.YNc(7,Pe,2,0,"span",23),t.YNc(8,be,2,0,"span",23),t.YNc(9,xe,2,0,"span",23),t.qZA(),t._UZ(10,"span",15),t.TgZ(11,"span",24),t._uU(12),t.qZA()()(),t.TgZ(13,"div",25),t.YNc(14,ye,2,2,"p",26),t.YNc(15,Te,2,2,"p",26),t.YNc(16,we,2,2,"p",26),t.YNc(17,Ze,5,0,"div",26),t.qZA()()),2&i){const e=n.$implicit,o=t.oxw();t.xp6(5),t.Oqu(e.sender.displayName),t.xp6(2),t.Q6J("ngIf","notify"!==e.type),t.xp6(1),t.Q6J("ngIf","accept"==e.right),t.xp6(1),t.Q6J("ngIf","reject"==e.right),t.xp6(3),t.Oqu(o.shareFunction.getDate(e.date)),t.xp6(2),t.Q6J("ngIf","notify"!==e.type),t.xp6(1),t.Q6J("ngIf","accept"==e.right),t.xp6(1),t.Q6J("ngIf","reject"==e.right),t.xp6(1),t.Q6J("ngIf","notify"!==e.type)}}class G{constructor(n,e,o,r){this.http=n,this.store=e,this.authService=o,this.shareFunction=r,this.acceptMails=[],this.declineMails=[],this.inviteMails=[],this.allMails=[],this.filteredMail=[],this.activeFilter="all",this.startNumber=0,this.endNumber=10,this.totalPage=0,this.store$=this.store.select("mail"),this.panelOpenState=!1}reloadEmail(){this.store.dispatch(nt.Q.getAllMails({uid:this.authService.currentUser?.uid}))}ngOnInit(){this.store.dispatch(nt.Q.getAllMails({uid:this.authService.currentUser?.uid})),this.store$.subscribe(n=>{n.mails&&(this.allMails=n.mails,this.filteredMail=[...n.mails].sort((e,o)=>parseInt(o.date)-parseInt(e.date)),this.acceptMails=n.mails.filter(e=>"accept"===e.right).sort((e,o)=>parseInt(o.date)-parseInt(e.date)),this.declineMails=n.mails.filter(e=>"decline"===e.right).sort((e,o)=>parseInt(o.date)-parseInt(e.date)),this.inviteMails=n.mails.filter(e=>"invite"===e.type).sort((e,o)=>parseInt(o.date)-parseInt(e.date)))})}acceptInvite(n,e,o){this.store.dispatch(nt.Q.acceptInvite({id:n,right:e,docId:o,uid:this.authService.currentUser?.uid}))}declineInvite(n,e,o){this.store.dispatch(nt.Q.declineInvite({id:n,right:"decline",docId:o,uid:this.authService.currentUser?.uid}))}changeMailType(n){switch(n){case"accept":this.activeFilter="accept",this.filteredMail=this.acceptMails;break;case"decline":this.activeFilter="decline",this.filteredMail=this.declineMails;break;case"invite":this.activeFilter="invite",this.filteredMail=this.inviteMails;break;case"all":this.activeFilter="all",this.filteredMail=this.allMails}this.startNumber=0,this.endNumber=10}searchMail(n){this.filteredMail=this.allMails.filter(e=>e.sender.displayName.toLowerCase().includes(n.target.value.toLowerCase())||e.doc.name.toLowerCase().includes(n.target.value.toLowerCase()))}changePage(n){if("increase"===n){if(this.startNumber+10>=this.filteredMail.length)return;this.startNumber+=10,this.endNumber+=this.filteredMail.length/this.endNumber>=1?10:this.filteredMail.length%10}else{if(this.startNumber-10<0)return;this.startNumber-=10,this.endNumber-=this.filteredMail.length/this.endNumber>=1?10:this.filteredMail.length%10}}}G.\u0275fac=function(n){return new(n||G)(t.Y36(dt.eN),t.Y36(F.yh),t.Y36(R.e),t.Y36(E))},G.\u0275cmp=t.Xpm({type:G,selectors:[["app-mail"]],decls:59,vars:13,consts:[[1,"container"],[1,"top-container"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Ex. Email",3,"change"],["mat-icon-button","","matSuffix",""],[1,"button-holder"],["mat-button","",3,"ngClass","click"],["mat-button","","matBadgePosition","after","matBadgeColor","warn",3,"ngClass","click"],[1,"filter"],["mat-icon-button","",3,"matMenuTriggerFor"],["filter","matMenu"],["mat-menu-item",""],[1,"filter-item",3,"click"],[1,"mid-container"],["mat-icon-button","",3,"click"],[1,"spacer"],[1,"page"],[1,"email-holder"],["hideToggle","",4,"ngFor","ngForOf"],["hideToggle",""],[1,"email-info"],[1,"title-description"],[1,"title"],["class","description",4,"ngIf"],[1,"date"],[1,"content"],[4,"ngIf"],[1,"description"],["mat-button","",1,"accept",3,"click"],["mat-button","",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Find"),t.qZA(),t.TgZ(5,"input",3),t.NdJ("change",function(r){return e.searchMail(r)}),t.qZA(),t.TgZ(6,"button",4)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()(),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return e.changeMailType("all")}),t.TgZ(11,"span"),t._uU(12,"All"),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){return e.changeMailType("invite")}),t.TgZ(14,"span"),t._uU(15,"Invited"),t.qZA()(),t.TgZ(16,"button",7),t.NdJ("click",function(){return e.changeMailType("accept")}),t.TgZ(17,"span"),t._uU(18,"Accepted"),t.qZA()(),t.TgZ(19,"button",6),t.NdJ("click",function(){return e.changeMailType("decline")}),t.TgZ(20,"span"),t._uU(21,"Rejected"),t.qZA()()(),t.TgZ(22,"div",8)(23,"button",9)(24,"mat-icon"),t._uU(25,"filter_list"),t.qZA()(),t.TgZ(26,"mat-menu",null,10)(28,"button",11)(29,"span",12),t.NdJ("click",function(){return e.changeMailType("all")}),t._uU(30,"All"),t.qZA()(),t.TgZ(31,"button",11)(32,"span",12),t.NdJ("click",function(){return e.changeMailType("invite")}),t._uU(33,"Invited"),t.qZA()(),t.TgZ(34,"button",11)(35,"span",12),t.NdJ("click",function(){return e.changeMailType("accept")}),t._uU(36,"Accepted"),t.qZA()(),t.TgZ(37,"button",11)(38,"span",12),t.NdJ("click",function(){return e.changeMailType("decline")}),t._uU(39,"Rejected"),t.qZA()()()()(),t.TgZ(40,"div",13)(41,"div")(42,"button",14),t.NdJ("click",function(){return e.reloadEmail()}),t.TgZ(43,"mat-icon"),t._uU(44,"loop"),t.qZA()()(),t._UZ(45,"div",15),t.TgZ(46,"div",16)(47,"button",14),t.NdJ("click",function(){return e.changePage("decrease")}),t.TgZ(48,"mat-icon"),t._uU(49,"keyboard_arrow_left"),t.qZA()(),t.TgZ(50,"p"),t._uU(51),t.qZA(),t.TgZ(52,"button",14),t.NdJ("click",function(){return e.changePage("increase")}),t.TgZ(53,"mat-icon"),t._uU(54,"keyboard_arrow_right"),t.qZA()()(),t._UZ(55,"div",15),t.qZA(),t.TgZ(56,"div",17),t.YNc(57,Ee,18,9,"mat-expansion-panel",18),t.ALo(58,"slice"),t.qZA()()),2&n){const o=t.MAs(27);t.xp6(10),t.Q6J("ngClass","all"==e.activeFilter?"selected":""),t.xp6(3),t.Q6J("ngClass","invite"==e.activeFilter?"selected":""),t.xp6(3),t.Q6J("ngClass","accept"==e.activeFilter?"selected":""),t.xp6(3),t.Q6J("ngClass","decline"==e.activeFilter?"selected":""),t.xp6(4),t.Q6J("matMenuTriggerFor",o),t.xp6(28),t.lnq("",e.startNumber+1,"-",e.endNumber," of ",e.filteredMail.length,""),t.xp6(6),t.Q6J("ngForOf",t.Dn7(58,9,e.filteredMail,e.startNumber,10))}},dependencies:[l.mk,l.sg,l.O5,N.Hw,m.lW,m.RK,_.KE,_.hX,_.R9,T.Nt,it.ib,it.yz,Z.VK,Z.OP,Z.p6,l.OU],styles:[".container[_ngcontent-%COMP%]{width:calc(100% - 4rem);padding:1rem 2rem;display:flex;flex-direction:column}.top-container[_ngcontent-%COMP%], .top-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.top-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.top-container[_ngcontent-%COMP%]   .button-holder[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;margin:0rem 1rem;margin-bottom:24px;padding:1.5rem 1rem;background-color:var(--color-1);box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.5);color:var(--color-4);font-weight:600;font-size:1.2rem}.top-container[_ngcontent-%COMP%]   .button-holder[_ngcontent-%COMP%] > .selected[_ngcontent-%COMP%]{background-color:var(--color-4);color:var(--color-1)}.filter[_ngcontent-%COMP%]{display:none!important}.filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-weight:500;color:var(--color-4);height:56px!important;width:56px!important;padding:auto;margin-bottom:24px;margin-left:8px}.filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;font-size:28px;line-height:28px}.filter-item[_ngcontent-%COMP%]{display:inline-block;margin:1rem 2rem}  .mat-badge-content{background-color:#ff2c2c!important;color:var(--color-1)!important;font-size:.75rem!important}.mid-container[_ngcontent-%COMP%], .mid-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.mid-container[_ngcontent-%COMP%]{background-color:var(--color-1);box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.5)}.mid-container[_ngcontent-%COMP%] > .spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mid-container[_ngcontent-%COMP%] > .page[_ngcontent-%COMP%]{color:var(--color-4);font-weight:600}.email-holder[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%]{margin:.5rem 0rem}.email-holder[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%] > mat-expansion-panel-header[_ngcontent-%COMP%]{height:4rem}.email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%], .email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center}.email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .date[_ngcontent-%COMP%]{color:var(--color-4);font-size:1.2rem}.email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%], .email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{color:var(--color-4);font-size:1.2rem}.email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{font-weight:600}.email-holder[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{margin-right:1rem}.email-holder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.email-holder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:0rem 1rem;padding:1.25rem 1rem;background-color:var(--color-1);box-shadow:2px 2px 2px 0 rgba(var(--color-4-rgb),.5);color:var(--color-4);font-weight:600;font-size:1rem}.email-holder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .accept[_ngcontent-%COMP%]{background-color:var(--color-4);color:var(--color-1)}.email-holder[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media screen and (max-width: 1300px){.top-container[_ngcontent-%COMP%]{flex-direction:column}.top-container[_ngcontent-%COMP%]   .button-holder[_ngcontent-%COMP%]{width:calc(100% + 2rem)}.top-container[_ngcontent-%COMP%]   .button-holder[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 768px){.top-container[_ngcontent-%COMP%]{flex-direction:row}.top-container[_ngcontent-%COMP%]   .button-holder[_ngcontent-%COMP%]{display:none}.filter[_ngcontent-%COMP%]{display:block!important}.email-info[_ngcontent-%COMP%] > .date[_ngcontent-%COMP%]{font-size:.8rem!important}.email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%]{flex-direction:column!important}.email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{font-size:1rem!important}.email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{font-size:.8rem!important;margin-right:0rem!important}.email-info[_ngcontent-%COMP%] > .title-description[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:flex-start}.content[_ngcontent-%COMP%]{width:100%;flex-direction:column!important;align-items:flex-start!important}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:1rem}}"]});class B{}B.\u0275fac=function(n){return new(n||B)},B.\u0275cmp=t.Xpm({type:B,selectors:[["app-recycle"]],decls:2,vars:0,template:function(n,e){1&n&&(t.TgZ(0,"h1"),t._uU(1,"COMING SOON"),t.qZA())},styles:["h1[_ngcontent-%COMP%]{display:flex;align-self:center;justify-content:center}"]});var ct=a(3267),De=a(4850);const ke=function(i){return["/profile",i]},Ue=function(){return["/main","documents","owned"]},Ae=function(){return["/main","documents","shared"]},qe=function(){return["/main","documents","bin"]},Ne=function(){return["/main","mail"]};class W{constructor(n,e,o,r){this.route=n,this.store=e,this.authService=o,this.changeDetectorRef=r,this.sidebarToggle=!0,this.activeLink="",this.navigateItems=[{icon:"contact_page",title:"Documents",link:"documents/owned",active:!0},{icon:"description",title:"Shared Documents",link:"documents/shared",active:!1},{icon:"star",title:"Favorites",link:"documents/favorite",active:!1},{icon:"delete",title:"Recyle bin",link:"recycle",active:!1},{icon:"mail",title:"Mail",link:"mail",active:!1}],this.document$=this.store.select("doc");let s=this.route.url.split("/");this.activeLink=null==s[3]?s[2]:`${s[2]}/${s[3]}`,this.navigateItems.forEach(c=>{c.active=c.link==this.activeLink})}ngOnInit(){this.currentUser=this.authService.currentUser,this.innerWidth=window.innerWidth}navigate(n){this.navigateItems.forEach(e=>{e.active=e.link==n}),this.route.navigate([`main/${n}`])}logout(){this.authService.logout()}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}onResize(){this.innerWidth=window.innerWidth}}W.\u0275fac=function(n){return new(n||W)(t.Y36(b.F0),t.Y36(F.yh),t.Y36(R.e),t.Y36(t.sBO))},W.\u0275cmp=t.Xpm({type:W,selectors:[["app-main"]],hostBindings:function(n,e){1&n&&t.NdJ("resize",function(r){return e.onResize(r)},!1,t.Jf7)},decls:74,vars:29,consts:[["mat-icon-button","","matTooltip","Menu",3,"click"],[1,"write"],[1,"flow"],[1,"toolbar-item-spacer"],["mat-icon-button","","matTooltip","Notifications"],["mat-icon-button","","matTooltip","My Account",3,"matMenuTriggerFor"],["yPosition","below",3,"overlapTrigger"],["userAccountMenu",""],["mat-menu-item","",3,"routerLink"],["mat-menu-item","","routerLink","#"],["mat-menu-item","",3,"click"],[1,"mat-toolbar-height"],[1,"app-container"],[1,"app-sidenav",3,"mode"],["sidenav",""],["mat-list-item","",1,"list-item",3,"routerLink","disabled"],["matListItemIcon",""],["matListItemTitle",""],["mat-list-item","",1,"list-item",3,"routerLink"],["mat-button","",1,"side-bar-button"]],template:function(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"mat-toolbar")(1,"button",0),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(35);return t.KtG(s.toggle())}),t.TgZ(2,"mat-icon"),t._uU(3,"menu"),t.qZA()(),t.TgZ(4,"span",1),t._uU(5,"Write"),t.TgZ(6,"span",2),t._uU(7,"Flow"),t.qZA()(),t._UZ(8,"span",3),t.TgZ(9,"button",4)(10,"mat-icon"),t._uU(11,"notifications"),t.qZA()(),t.TgZ(12,"button",5)(13,"mat-icon"),t._uU(14,"account_circle"),t.qZA()(),t.TgZ(15,"mat-menu",6,7)(17,"button",8)(18,"mat-icon"),t._uU(19,"person"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"My Account"),t.qZA()(),t.TgZ(22,"button",9)(23,"mat-icon"),t._uU(24,"settings"),t.qZA(),t.TgZ(25,"span"),t._uU(26,"Settings"),t.qZA()(),t.TgZ(27,"button",10),t.NdJ("click",function(){return e.logout()}),t.TgZ(28,"mat-icon"),t._uU(29,"exit_to_app"),t.qZA(),t.TgZ(30,"span"),t._uU(31,"Logout"),t.qZA()()()(),t._UZ(32,"div",11),t.TgZ(33,"mat-sidenav-container",12)(34,"mat-sidenav",13,14)(36,"mat-nav-list")(37,"mat-expansion-panel")(38,"mat-expansion-panel-header"),t._uU(39," Document "),t.qZA(),t.TgZ(40,"mat-nav-list")(41,"a",15),t.ALo(42,"async"),t.TgZ(43,"mat-icon",16),t._uU(44,"description"),t.qZA(),t.TgZ(45,"span",17),t._uU(46,"My document"),t.qZA()(),t.TgZ(47,"a",15),t.ALo(48,"async"),t.TgZ(49,"mat-icon",16),t._uU(50,"contact_page"),t.qZA(),t.TgZ(51,"span",17),t._uU(52,"Shared document"),t.qZA()(),t.TgZ(53,"a",15),t.ALo(54,"async"),t.TgZ(55,"mat-icon",16),t._uU(56,"delete"),t.qZA(),t.TgZ(57,"span",17),t._uU(58,"Recycle bin"),t.qZA()()()(),t.TgZ(59,"mat-expansion-panel")(60,"mat-expansion-panel-header"),t._uU(61," Mail "),t.qZA(),t.TgZ(62,"mat-nav-list")(63,"a",18)(64,"mat-icon",16),t._uU(65,"mail"),t.qZA(),t.TgZ(66,"span",17),t._uU(67,"Inbox"),t.qZA()()()(),t._UZ(68,"mat-divider"),t.TgZ(69,"button",19)(70,"span"),t._uU(71," Community "),t.qZA()()()(),t.TgZ(72,"mat-sidenav-content"),t._UZ(73,"router-outlet"),t.qZA()()}if(2&n){const o=t.MAs(16);let r,s,c;t.xp6(12),t.Q6J("matMenuTriggerFor",o),t.xp6(3),t.Q6J("overlapTrigger",!1),t.xp6(2),t.Q6J("routerLink",t.VKq(23,ke,e.currentUser.uid)),t.xp6(17),t.ekj("mat-elevation-z4",!0),t.Q6J("mode",e.innerWidth<=1100?"over":"side"),t.xp6(3),t.ekj("mat-elevation-z0",!0),t.xp6(4),t.Q6J("routerLink",t.DdM(25,Ue))("disabled",null==(r=t.lcZ(42,17,e.document$))?null:r.loading),t.xp6(6),t.Q6J("routerLink",t.DdM(26,Ae))("disabled",null==(s=t.lcZ(48,19,e.document$))?null:s.loading),t.xp6(6),t.Q6J("routerLink",t.DdM(27,qe))("disabled",null==(c=t.lcZ(54,21,e.document$))?null:c.loading),t.xp6(6),t.ekj("mat-elevation-z0",!0),t.xp6(4),t.Q6J("routerLink",t.DdM(28,Ne))}},dependencies:[b.lC,b.rH,ut.Ye,N.Hw,m.lW,m.RK,it.ib,it.yz,ct.JX,ct.TM,ct.Rh,V.Hk,V.Tg,V.Yt,De.d,V.sL,Z.VK,Z.OP,Z.p6,K.gM,l.Ov],styles:['mat-toolbar[_ngcontent-%COMP%]{background-color:var(--color-1);box-shadow:0 0 4px 0 rgba(var(--color-4-rgb),.5);position:fixed;z-index:9999}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--color-4);margin:0rem .25rem}  .mat-icon-no-color{color:var(--color-4)!important}.mat-toolbar-height[_ngcontent-%COMP%]{height:64px}@media screen and (max-width: 600px){.mat-toolbar-height[_ngcontent-%COMP%]{height:56px}}.toolbar-item-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.app-container[_ngcontent-%COMP%]{height:calc(100% - 64px);margin:0}.app-sidenav[_ngcontent-%COMP%]{width:300px}.app-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}mat-expansion-panel-header[_ngcontent-%COMP%]{color:var(--color-4);font-weight:600;font-size:1.1rem}mat-nav-list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]{color:var(--color-4);font-weight:500;font-size:1rem}mat-nav-list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:var(--color-4)}.side-bar-button[_ngcontent-%COMP%]{width:100%;height:48px;padding:0 24px;margin:.5rem 0;display:flex;justify-content:flex-start;align-items:center}.side-bar-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Open sans,"sans-serif";color:var(--color-4);font-weight:500;font-size:1.1rem}  .mdc-list-item__primary-text{color:var(--color-4)!important}.write[_ngcontent-%COMP%], .flow[_ngcontent-%COMP%]{font-size:1.5rem}.write[_ngcontent-%COMP%]{font-weight:500;color:var(--color-4)}.flow[_ngcontent-%COMP%]{font-weight:700;color:var(--color-4)}@media screen and (max-width: 600px){.app-sidenav[_ngcontent-%COMP%]{width:250px}mat-expansion-panel-header[_ngcontent-%COMP%]{font-size:.8rem}mat-nav-list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]{font-size:.75rem}mat-nav-list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:1rem;line-height:1rem;margin:0 10px}.side-bar-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}}@media screen and (max-width: 400px){.write[_ngcontent-%COMP%], .flow[_ngcontent-%COMP%]{display:none!important}}']});const Se=[{path:"",component:W,runGuardsAndResolvers:"always",children:[{path:"",redirectTo:"documents/owned",pathMatch:"full"},{path:"documents/:type",component:H,runGuardsAndResolvers:"always"},{path:"mail",component:G},{path:"recycle",component:B}]},{path:"document/edit",component:Q,runGuardsAndResolvers:"always"}];class S{}S.\u0275fac=function(n){return new(n||S)},S.\u0275mod=t.oAB({type:S}),S.\u0275inj=t.cJS({imports:[b.Bz.forChild(Se),b.Bz]});var Ie=a(9717),ze=a(2271);class I{}I.\u0275fac=function(n){return new(n||I)},I.\u0275mod=t.oAB({type:I}),I.\u0275inj=t.cJS({imports:[l.ez,S,Ie.h,ze.m,v.u5,Ht.forRoot()]})},9709:(at,A,a)=>{a.d(A,{K:()=>u});var l=a(5861),b=a(529),x=a(9808),q=a(2340),M=a(4650),y=a(7556);class u{constructor(m,_){this.authService=m,this.http=_,this.apiURL=q.N.apiURL}getUser(m){return(0,x.n)(this.http.get(`${this.apiURL}/user?uid=${m}`))}createUser(m){this.http.post(`${this.apiURL}/user/register`,m).subscribe(_=>{})}updateUser(m){var _=this;return(0,l.Z)(function*(){return yield(0,x.n)(_.http.put(`${_.apiURL}/user/update`,m,{headers:new b.WM({authorization:_.authService.getToken(),ownerid:_.authService.currentUser?.uid})}))})()}updateUserAvatar(m){var _=this;return(0,l.Z)(function*(){let T=new FormData;return T.append("file-avatar",m),yield(0,x.n)(_.http.put(`${_.apiURL}/user/upload-avatar`,T,{headers:new b.WM({authorization:_.authService.getToken(),ownerid:_.authService.currentUser?.uid})}))})()}updateBannerAvatar(m){var _=this;return(0,l.Z)(function*(){let T=new FormData;return T.append("file-banner",m),yield(0,x.n)(_.http.put(`${_.apiURL}/user/upload-banner`,T,{headers:new b.WM({authorization:_.authService.getToken(),ownerid:_.authService.currentUser?.uid})}))})()}}u.\u0275fac=function(m){return new(m||u)(M.LFG(y.e),M.LFG(b.eN))},u.\u0275prov=M.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}}]);