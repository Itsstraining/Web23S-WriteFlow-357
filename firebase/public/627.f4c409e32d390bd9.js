"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[627],{4627:(ne,L,p)=>{p.r(L),p.d(L,{ProfileModule:()=>P});var v=p(6895),Y=p(8317),b=p(5861),m=p(5938),t=p(4650),O=p(9101),W=p(9549),q=p(4144),y=p(4006);class S{constructor(a,e){this.dialogRef=a,this.data=e}ngOnInit(){this.tempBio={bio:structuredClone(this.data.bio)}}onNoClick(){this.dialogRef.close()}}S.\u0275fac=function(a){return new(a||S)(t.Y36(m.so),t.Y36(m.WI))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-edit-bio"]],decls:14,vars:2,consts:[[1,"container"],[1,"header"],[1,"editor"],["appearance","outline"],["matInput","","rows","15","cols","30",3,"ngModel","ngModelChange"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"save",3,"mat-dialog-close"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Edit Bio"),t.qZA()(),t.TgZ(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Bio"),t.qZA(),t.TgZ(8,"textarea",4),t.NdJ("ngModelChange",function(i){return e.tempBio.bio=i}),t.qZA()()(),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return e.onNoClick()}),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",7),t._uU(13,"Save"),t.qZA()()()),2&a&&(t.xp6(8),t.Q6J("ngModel",e.tempBio.bio),t.xp6(4),t.Q6J("mat-dialog-close",e.tempBio))},dependencies:[O.lW,W.KE,W.hX,q.Nt,m.ZT,y.Fj,y.JJ,y.On],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;width:100%}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}"]});var z=p(7392);function ot(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",10),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).index,c=t.oxw();return t.KtG(c.tempJob.job[r]=i)}),t.qZA()(),t.TgZ(5,"button",4),t.NdJ("click",function(){const o=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeJob(o))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()}if(2&s){const e=a.index,n=t.oxw();t.xp6(3),t.hij("job ",e+1,""),t.xp6(1),t.Q6J("ngModel",n.tempJob.job[e])}}class E{constructor(a,e){this.dialogRef=a,this.data=e}ngOnInit(){this.tempJob={job:structuredClone(this.data.job)}}onNoClick(){this.dialogRef.close()}trackByFn(a,e){return a}addJob(){this.tempJob.job.push("")}removeJob(a){this.tempJob.job.splice(a,1)}}E.\u0275fac=function(a){return new(a||E)(t.Y36(m.so),t.Y36(m.WI))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-edit-job"]],decls:14,vars:3,consts:[[1,"container"],[1,"header"],[1,"editor"],["class","job",4,"ngFor","ngForOf","ngForTrackBy"],["mat-icon-button","",3,"click"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","",1,"save",3,"mat-dialog-close"],[1,"job"],["appearance","outline"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Edit Bio"),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,ot,8,2,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return e.addJob()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()()(),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return e.onNoClick()}),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",7),t._uU(13,"Save"),t.qZA()()()),2&a&&(t.xp6(5),t.Q6J("ngForOf",e.tempJob.job)("ngForTrackBy",e.trackByFn),t.xp6(7),t.Q6J("mat-dialog-close",e.tempJob))},dependencies:[v.sg,z.Hw,O.lW,O.RK,W.KE,W.hX,q.Nt,m.ZT,y.Fj,y.JJ,y.On],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;width:100%}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%] > .job[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%] > .job[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 48px)}.container[_ngcontent-%COMP%] > .editor[_ngcontent-%COMP%] > .job[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--color-4)}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}"]});var at=p(1481);const rt=["wrapper"],st=["sourceImage"];function ct(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"img",4,5),t.NdJ("load",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.imageLoadedInView())})("mousedown",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.startMove(i,o.moveTypes.Drag))})("touchstart",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.startMove(i,o.moveTypes.Drag))}),t.qZA()}if(2&s){const e=t.oxw();t.Udp("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),t.ekj("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),t.Q6J("src",e.safeImgDataUrl,t.LSH),t.uIk("alt",e.imageAltText)}}function gt(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",9),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"topleft"))}),t._UZ(2,"span",10),t.qZA(),t.TgZ(3,"span",11),t._UZ(4,"span",10),t.qZA(),t.TgZ(5,"span",12),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"topright"))}),t._UZ(6,"span",10),t.qZA(),t.TgZ(7,"span",13),t._UZ(8,"span",10),t.qZA(),t.TgZ(9,"span",14),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottomright"))}),t._UZ(10,"span",10),t.qZA(),t.TgZ(11,"span",15),t._UZ(12,"span",10),t.qZA(),t.TgZ(13,"span",16),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottomleft"))}),t._UZ(14,"span",10),t.qZA(),t.TgZ(15,"span",17),t._UZ(16,"span",10),t.qZA(),t.TgZ(17,"span",18),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"top"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"top"))}),t.qZA(),t.TgZ(18,"span",19),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"right"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"right"))}),t.qZA(),t.TgZ(19,"span",20),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"bottom"))}),t.qZA(),t.TgZ(20,"span",21),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"left"))})("touchstart",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startMove(i,o.moveTypes.Resize,"left"))}),t.qZA(),t.BQk()}}function ht(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("keydown",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.keyboardAccess(i))}),t.TgZ(1,"div",7),t.NdJ("mousedown",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.startMove(i,o.moveTypes.Move))})("touchstart",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.startMove(i,o.moveTypes.Move))}),t.qZA(),t.YNc(2,gt,21,0,"ng-container",8),t.qZA()}if(2&s){const e=t.oxw();t.Udp("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left","center"===e.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),t.ekj("ngx-ic-round",e.roundCropper),t.xp6(2),t.Q6J("ngIf",!e.hideResizeSquares)}}class lt{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e]),this.validateOptions()}setOptionsFromChanges(a){Object.keys(a).filter(e=>e in this).forEach(e=>this[e]=a[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var f=(()=>{return(s=f||(f={})).Drag="drag",s.Move="move",s.Resize="resize",s.Pinch="pinch",f;var s})();function K(s,a){return s/100*a}let ut=(()=>{class s{crop(e,n,i,o){const r=this.getImagePosition(e,n,i,o),c=r.x2-r.x1,g=r.y2-r.y1,h=document.createElement("canvas");h.width=c,h.height=g;const l=h.getContext("2d");if(!l)return null;null!=o.backgroundColor&&(l.fillStyle=o.backgroundColor,l.fillRect(0,0,c,g));const d=(o.transform.scale||1)*(o.transform.flipH?-1:1),x=(o.transform.scale||1)*(o.transform.flipV?-1:1),{translateH:I,translateV:A}=this.getCanvasTranslate(e,n,o),_=n.transformed;l.setTransform(d,0,0,x,_.size.width/2+I,_.size.height/2+A),l.translate(-r.x1/d,-r.y1/x),l.rotate((o.transform.rotate||0)*Math.PI/180),l.drawImage(_.image,-_.size.width/2,-_.size.height/2);const u={width:c,height:g,imagePosition:r,cropperPosition:{...i}};o.containWithinAspectRatio&&(u.offsetImagePosition=this.getOffsetImagePosition(e,n,i,o));const B=this.getResizeRatio(c,g,o);return 1!==B&&(u.width=Math.round(c*B),u.height=o.maintainAspectRatio?Math.round(u.width/o.aspectRatio):Math.round(g*B),function ft(s,a,e){const n=s.width,i=s.height,o=n/(a=Math.round(a)),r=i/(e=Math.round(e)),c=Math.ceil(o/2),g=Math.ceil(r/2),h=s.getContext("2d");if(h){const l=h.getImageData(0,0,n,i),d=h.createImageData(a,e),x=l.data,I=d.data;for(let A=0;A<e;A++)for(let _=0;_<a;_++){const u=4*(_+A*a),B=A*r;let M=0,F=0,G=0,X=0,$=0,tt=0,et=0;const Xt=Math.floor(_*o),$t=Math.floor(A*r);let j=Math.ceil((_+1)*o),N=Math.ceil((A+1)*r);j=Math.min(j,n),N=Math.min(N,i);for(let J=$t;J<N;J++){const nt=Math.abs(B-J)/g,te=_*o,ee=nt*nt;for(let Q=Xt;Q<j;Q++){const it=Math.abs(te-Q)/c,T=Math.sqrt(ee+it*it);if(T>=1)continue;M=2*T*T*T-3*T*T+1;const R=4*(Q+J*n);et+=M*x[R+3],G+=M,x[R+3]<255&&(M=M*x[R+3]/250),X+=M*x[R],$+=M*x[R+1],tt+=M*x[R+2],F+=M}}I[u]=X/F,I[u+1]=$/F,I[u+2]=tt/F,I[u+3]=et/G}s.width=a,s.height=e,h.putImageData(d,0,0)}}(h,u.width,u.height)),u.base64=h.toDataURL("image/"+o.format,this.getQuality(o)),u}getCanvasTranslate(e,n,i){if("px"===i.transform.translateUnit){const o=this.getRatio(e,n);return{translateH:(i.transform.translateH||0)*o,translateV:(i.transform.translateV||0)*o}}return{translateH:i.transform.translateH?K(i.transform.translateH,n.transformed.size.width):0,translateV:i.transform.translateV?K(i.transform.translateV,n.transformed.size.height):0}}getRatio(e,n){return n.transformed.size.width/e.nativeElement.offsetWidth}getImagePosition(e,n,i,o){const r=this.getRatio(e,n),c={x1:Math.round(i.x1*r),y1:Math.round(i.y1*r),x2:Math.round(i.x2*r),y2:Math.round(i.y2*r)};return o.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,n.transformed.size.width),c.y2=Math.min(c.y2,n.transformed.size.height)),c}getOffsetImagePosition(e,n,i,o){const g=n.transformed.size.width/e.nativeElement.offsetWidth;let h,l;(o.canvasRotation+n.exifTransform.rotate)%2?(h=(n.transformed.size.width-n.original.size.height)/2,l=(n.transformed.size.height-n.original.size.width)/2):(h=(n.transformed.size.width-n.original.size.width)/2,l=(n.transformed.size.height-n.original.size.height)/2);const d={x1:Math.round(i.x1*g)-h,y1:Math.round(i.y1*g)-l,x2:Math.round(i.x2*g)-h,y2:Math.round(i.y2*g)-l};return o.containWithinAspectRatio||(d.x1=Math.max(d.x1,0),d.y1=Math.max(d.y1,0),d.x2=Math.min(d.x2,n.transformed.size.width),d.y2=Math.min(d.y2,n.transformed.size.height)),d}getResizeRatio(e,n,i){const o=i.resizeToWidth/e,r=i.resizeToHeight/n,c=new Array;i.resizeToWidth>0&&c.push(o),i.resizeToHeight>0&&c.push(r);const g=0===c.length?1:Math.min(...c);return g>1&&!i.onlyScaleDown?g:Math.min(g,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_t=(()=>{class s{resetCropperPosition(e,n,i){if(!e?.nativeElement)return;const o=e.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)n.x1=0,n.x2=o.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:o.offsetWidth,n.y1=0,n.y2=o.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:o.offsetHeight;else{const r=Math.min(i.cropperScaledMaxWidth,o.offsetWidth),c=Math.min(i.cropperScaledMaxHeight,o.offsetHeight);if(i.maintainAspectRatio)if(o.offsetWidth/i.aspectRatio<o.offsetHeight){n.x1=0,n.x2=r;const g=r/i.aspectRatio;n.y1=(o.offsetHeight-g)/2,n.y2=n.y1+g}else{n.y1=0,n.y2=c;const g=c*i.aspectRatio;n.x1=(o.offsetWidth-g)/2,n.x2=n.x1+g}else n.x1=0,n.x2=r,n.y1=0,n.y2=c}}move(e,n,i){const o=this.getClientX(e)-n.clientX,r=this.getClientY(e)-n.clientY;i.x1=n.x1+o,i.y1=n.y1+r,i.x2=n.x2+o,i.y2=n.y2+r}resize(e,n,i,o,r){const c=this.getClientX(e)-n.clientX,g=this.getClientY(e)-n.clientY;switch(n.position){case"left":i.x1=Math.min(Math.max(n.x1+c,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(n.x1+c,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+g,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(n.y1+g,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(n.x2+c,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y1=Math.min(Math.max(n.y1+g,i.y2-r.cropperScaledMaxHeight),i.y2-r.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(n.x2+c,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(n.x2+c,i.x1+r.cropperScaledMaxWidth),i.x1+r.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+g,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(n.y2+g,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(n.x1+c,i.x2-r.cropperScaledMaxWidth),i.x2-r.cropperScaledMinWidth),i.y2=Math.max(Math.min(n.y2+g,i.y1+r.cropperScaledMaxHeight),i.y1+r.cropperScaledMinHeight);break;case"center":const h=e.scale,l=Math.min(Math.max(r.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*h),r.cropperScaledMaxWidth),d=Math.min(Math.max(r.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*h),r.cropperScaledMaxHeight);i.x1=n.clientX-l/2,i.x2=n.clientX+l/2,i.y1=n.clientY-d/2,i.y2=n.clientY+d/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>o.width&&(i.x1-=i.x2-o.width,i.x2=o.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>o.height&&(i.y1-=i.y2-o.height,i.y2=o.height)}r.maintainAspectRatio&&this.checkAspectRatio(n.position,i,o,r)}checkAspectRatio(e,n,i,o){let r=0,c=0;switch(e){case"top":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,r=Math.max(n.x2-i.width,0),c=Math.max(0-n.y1,0),(r>0||c>0)&&(n.x2-=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y1+=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,r=Math.max(n.x2-i.width,0),c=Math.max(n.y2-i.height,0),(r>0||c>0)&&(n.x2-=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y2-=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,r=Math.max(0-n.x1,0),c=Math.max(0-n.y1,0),(r>0||c>0)&&(n.x1+=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y1+=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/o.aspectRatio,r=Math.max(n.x2-i.width,0),c=Math.max(0-n.y1,0),(r>0||c>0)&&(n.x2-=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y1+=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,r=Math.max(n.x2-i.width,0),c=Math.max(n.y2-i.height,0),(r>0||c>0)&&(n.x2-=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y2-=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio,r=Math.max(0-n.x1,0),c=Math.max(n.y2-i.height,0),(r>0||c>0)&&(n.x1+=c*o.aspectRatio>r?c*o.aspectRatio:r,n.y2-=c*o.aspectRatio>r?c:r/o.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*o.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/o.aspectRatio;const g=Math.max(0-n.x1,0),h=Math.max(n.x2-i.width,0),l=Math.max(n.y2-i.height,0),d=Math.max(0-n.y1,0);(g>0||h>0||l>0||d>0)&&(n.x1+=l*o.aspectRatio>g?l*o.aspectRatio:g,n.x2-=d*o.aspectRatio>h?d*o.aspectRatio:h,n.y1+=d*o.aspectRatio>h?d:h/o.aspectRatio,n.y2-=l*o.aspectRatio>g?l:g/o.aspectRatio)}}getClientX(e){return e.touches?.[0].clientX||e.clientX||0}getClientY(e){return e.touches?.[0].clientY||e.clientY||0}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();let At=(()=>{class s{constructor(){this.autoRotateSupported=function xt(){return new Promise(s=>{const a=new Image;a.onload=()=>{s(1===a.width&&2===a.height)},a.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(e,n){return new Promise((i,o)=>{const r=new FileReader;r.onload=c=>{this.loadImage(c.target.result,e.type,n).then(i).catch(o)},r.readAsDataURL(e)})}loadImage(e,n,i){return this.isValidImageType(n)?this.loadBase64Image(e,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,n){return new Promise((i,o)=>{const r=new Image;r.onerror=()=>o,r.onload=()=>{const c=document.createElement("canvas"),g=c.getContext("2d");c.width=r.width,c.height=r.height,g?.drawImage(r,0,0),this.loadBase64Image(c.toDataURL(),n).then(i)},r.crossOrigin="anonymous",r.src=e})}loadBase64Image(e,n){return new Promise((i,o)=>{const r=new Image;r.onload=()=>i({originalImage:r,originalBase64:e}),r.onerror=o,r.src=e}).then(i=>this.transformImageBase64(i,n))}transformImageBase64(e,n){var i=this;return(0,b.Z)(function*(){const o=yield i.autoRotateSupported,r=yield function Mt(s){switch("string"==typeof s&&(s=function vt(s){const a=new DataView(function bt(s){s=s.replace(/^data\:([^\;]+)\;base64,/gim,"");const a=atob(s),e=a.length,n=new Uint8Array(e);for(let i=0;i<e;i++)n[i]=a.charCodeAt(i);return n.buffer}(s));if(65496!==a.getUint16(0,!1))return-2;const e=a.byteLength;let n=2;for(;n<e;){if(a.getUint16(n+2,!1)<=8)return-1;const i=a.getUint16(n,!1);if(n+=2,65505==i){if(1165519206!==a.getUint32(n+=2,!1))return-1;const o=18761==a.getUint16(n+=6,!1);n+=a.getUint32(n+4,o);const r=a.getUint16(n,o);n+=2;for(let c=0;c<r;c++)if(274==a.getUint16(n+12*c,o))return a.getUint16(n+12*c+8,o)}else{if(65280!=(65280&i))break;n+=a.getUint16(n,!1)}}return-1}(s)),s){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(o?-1:e.originalBase64);return e.originalImage&&e.originalImage.complete?i.transformLoadedImage({original:{base64:e.originalBase64,image:e.originalImage,size:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:r},n):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(e,n){var i=this;return(0,b.Z)(function*(){const o=n.canvasRotation+e.exifTransform.rotate,r={width:e.original.image.naturalWidth,height:e.original.image.naturalHeight};if(0===o&&!e.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{base64:e.original.base64,image:e.original.image,size:{...r}},transformed:{base64:e.original.base64,image:e.original.image,size:{...r}},exifTransform:e.exifTransform};const c=i.getTransformedSize(r,e.exifTransform,n),g=document.createElement("canvas");g.width=c.width,g.height=c.height;const h=g.getContext("2d");h?.setTransform(e.exifTransform.flip?-1:1,0,0,1,g.width/2,g.height/2),h?.rotate(Math.PI*(o/2)),h?.drawImage(e.original.image,-r.width/2,-r.height/2);const l=g.toDataURL(),d=yield i.loadImageFromBase64(l);return{original:{base64:e.original.base64,image:e.original.image,size:{...r}},transformed:{base64:l,image:d,size:{width:d.width,height:d.height}},exifTransform:e.exifTransform}})()}loadImageFromBase64(e){return new Promise((n,i)=>{const o=new Image;o.onload=()=>n(o),o.onerror=i,o.src=e})}getTransformedSize(e,n,i){const o=i.canvasRotation+n.rotate;if(i.containWithinAspectRatio){if(o%2){const c=e.height/i.aspectRatio;return{width:Math.max(e.height,e.width*i.aspectRatio),height:Math.max(e.width,c)}}{const c=e.width/i.aspectRatio;return{width:Math.max(e.width,e.height*i.aspectRatio),height:Math.max(e.height,c)}}}return o%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),V=(()=>{class s{constructor(e,n,i,o,r){this.cropService=e,this.cropperPositionService=n,this.loadImageService=i,this.sanitizer=o,this.cd=r,this.Hammer=window?.Hammer||null,this.settings=new lt,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=f,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new t.vpe,this.startCropImage=new t.vpe,this.imageLoaded=new t.vpe,this.cropperReady=new t.vpe,this.loadImageFailed=new t.vpe,this.transformChange=new t.vpe,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage?.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!e.maintainAspectRatio&&!e.aspectRatio?e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const e=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${e}, ${this.transform.translateV||0}${e}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.base64),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){this.loadedImage&&(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const e=new this.Hammer(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else(0,t.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const e=this.sourceImage.nativeElement;(this.maxSize.width!==e.offsetWidth||this.maxSize.height!==e.offsetHeight)&&(this.cropper.x1=this.cropper.x1*e.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*e.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*e.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*e.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){const n=+e.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const i=e.shiftKey?f.Resize:f.Move,o=e.altKey?function pt(s){switch(s){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(e.key):function dt(s){switch(s){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(e.key),r=function mt(s,a){switch(s){case"ArrowUp":return{clientX:0,clientY:-1*a};case"ArrowRight":return{clientX:a,clientY:0};case"ArrowDown":return{clientX:0,clientY:a};default:return{clientX:-1*a,clientY:0}}}(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},i,o),this.moveImg(r),this.moveStop()}startMove(e,n,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===f.Pinch||n===f.Drag&&!this.allowMoveImage||(e.preventDefault&&e.preventDefault(),this.moveStart={active:!0,type:n,position:i,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e),...this.cropper})}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart={active:!0,type:f.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(e){if(this.moveStart.active){if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===f.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===f.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===f.Drag){const n=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+i},this.setCssTransform()}this.cd.detectChanges()}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===f.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const e=this.sourceImage.nativeElement;this.maxSize.width=e.offsetWidth,this.maxSize.height=e.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===f.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(null!=this.loadedImage?.transformed?.image){this.startCropImage.emit();const e=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=e&&this.imageCropped.emit(e),e}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(ut),t.Y36(_t),t.Y36(At),t.Y36(at.H7),t.Y36(t.sBO))},s.\u0275cmp=t.Xpm({type:s,selectors:[["image-cropper"]],viewQuery:function(e,n){if(1&e&&(t.Gf(rt,7),t.Gf(st,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.wrapper=i.first),t.iGM(i=t.CRH())&&(n.sourceImage=i.first)}},hostVars:6,hostBindings:function(e,n){1&e&&t.NdJ("resize",function(){return n.onResize()},!1,t.Jf7)("mousemove",function(o){return n.moveImg(o)},!1,t.evT)("touchmove",function(o){return n.moveImg(o)},!1,t.evT)("mouseup",function(){return n.moveStop()},!1,t.evT)("touchend",function(){return n.moveStop()},!1,t.evT),2&e&&(t.Udp("text-align",n.alignImage),t.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[t.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,n){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,ct,2,8,"img",1),t._UZ(3,"div",2),t.YNc(4,ht,3,15,"div",3),t.qZA()),2&e&&(t.Udp("background",n.imageVisible&&n.backgroundColor),t.xp6(2),t.Q6J("ngIf",n.safeImgDataUrl),t.xp6(1),t.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),t.xp6(1),t.Q6J("ngIf",n.imageVisible))},dependencies:[v.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),s})(),Ot=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[v.ez]]}),s})();function yt(s,a){1&s&&(t.TgZ(0,"div",11),t._uU(1," PLEASE UPLOAD A VALID IMAGE "),t.qZA())}class Z{constructor(a,e){this.dialogRef=a,this.data=e,this.imageChangedEvent="",this.originalImage="",this.croppedImage="",this.finalImage="",this.invalidImage=!1}onNoClick(){this.dialogRef.close()}fileChangeEvent(a){this.imageChangedEvent=a,a.target.files[0]&&(this.originalImage=a.target.files[0])}imageCropped(a){var e=this;return(0,b.Z)(function*(){e.croppedImage=a.base64,e.finalImage=yield e.convertToFile(e.croppedImage,e.originalImage.name,"")})()}loadImageFailed(){console.log("Load failed"),this.invalidImage=!0}convertToFile(a,e,n){return n=n||(a.match(/^data:([^;]+);/)||"")[1],e=e||"file."+(n.split("/")[1]||"png"),fetch(a).then(function(i){return i.arrayBuffer()}).then(function(i){return new File([i],e,{type:n})})}}Z.\u0275fac=function(a){return new(a||Z)(t.Y36(m.so),t.Y36(m.WI))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-edit-avatar"]],decls:22,vars:8,consts:[[1,"container"],[1,"header"],["type","button","mat-stroked-button","",3,"click"],[3,"hidden"],["hidden","","type","file","name","file","id","file","accept","image/png, image/gif, image/jpeg",3,"change"],["fileavatar",""],["class","error",4,"ngIf"],["format","png",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","loadImageFailed"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"save",3,"mat-dialog-close"],[1,"error"]],template:function(a,e){if(1&a){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Edit Avatar"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(12);return t.KtG(o.click())}),t.TgZ(5,"span",3),t._uU(6,"Choose image"),t.qZA(),t.TgZ(7,"span",3),t._uU(8,"Change image"),t.qZA(),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"input",4,5),t.NdJ("change",function(o){return e.fileChangeEvent(o)}),t.qZA(),t.YNc(13,yt,2,0,"div",6),t.qZA(),t.TgZ(14,"div",3)(15,"mat-dialog-content")(16,"image-cropper",7),t.NdJ("imageCropped",function(o){return e.imageCropped(o)})("loadImageFailed",function(){return e.loadImageFailed()}),t.qZA()(),t.TgZ(17,"div",8)(18,"button",9),t.NdJ("click",function(){return e.onNoClick()}),t._uU(19,"Cancel"),t.qZA(),t.TgZ(20,"button",10),t._uU(21,"Save"),t.qZA()()()()}2&a&&(t.xp6(5),t.Q6J("hidden",e.originalImage),t.xp6(2),t.Q6J("hidden",!e.originalImage),t.xp6(6),t.Q6J("ngIf",e.invalidImage),t.xp6(1),t.Q6J("hidden",!e.originalImage),t.xp6(2),t.Q6J("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1),t.xp6(4),t.Q6J("mat-dialog-close",e.finalImage))},dependencies:[v.O5,z.Hw,O.lW,m.ZT,m.xY,V],styles:[".container[_ngcontent-%COMP%]{padding:3rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:1rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin-bottom:2rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}.container[_ngcontent-%COMP%]   .cropper[_ngcontent-%COMP%]{width:100%;padding:0}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%}.error[_ngcontent-%COMP%]{margin:1rem 2rem;color:#ff3e3e;font-weight:600;font-size:1.1em}"]});class H{constructor(a,e){this.dialogRef=a,this.data=e}onNoClick(){this.dialogRef.close()}}function wt(s,a){1&s&&(t.TgZ(0,"div",11),t._uU(1," PLEASE UPLOAD A VALID IMAGE "),t.qZA())}H.\u0275fac=function(a){return new(a||H)(t.Y36(m.so),t.Y36(m.WI))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-view-image"]],decls:6,vars:1,consts:[[1,"container"],[1,"close"],["mat-icon-button","",3,"click"],["alt","",3,"src"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return e.onNoClick()}),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()()(),t._UZ(5,"img",3),t.qZA()),2&a&&(t.xp6(5),t.Q6J("src",e.data.url,t.LSH))},dependencies:[z.Hw,O.RK],styles:[".container[_ngcontent-%COMP%]{padding:1rem}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;color:var(--color-4);margin-bottom:1rem}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:500px;max-width:100%}"]});class U{constructor(a,e){this.dialogRef=a,this.data=e,this.imageChangedEvent="",this.originalImage="",this.croppedImage="",this.finalImage="",this.invalidImage=!1}onNoClick(){this.dialogRef.close()}fileChangeEvent(a){this.imageChangedEvent=a,a.target.files[0]&&(this.originalImage=a.target.files[0])}imageCropped(a){var e=this;return(0,b.Z)(function*(){e.croppedImage=a.base64,e.finalImage=yield e.convertToFile(e.croppedImage,e.originalImage.name,"")})()}loadImageFailed(){console.log("Load failed"),this.invalidImage=!0}convertToFile(a,e,n){return n=n||(a.match(/^data:([^;]+);/)||"")[1],e=e||"file."+(n.split("/")[1]||"png"),fetch(a).then(function(i){return i.arrayBuffer()}).then(function(i){return new File([i],e,{type:n})})}}U.\u0275fac=function(a){return new(a||U)(t.Y36(m.so),t.Y36(m.WI))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-edit-banner"]],decls:22,vars:7,consts:[[1,"container"],[1,"header"],["type","button","mat-stroked-button","",3,"click"],[3,"hidden"],["hidden","","type","file","name","file","id","file","accept","image/png, image/gif, image/jpeg",3,"change"],["fileavatar",""],["class","error",4,"ngIf"],["format","png",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","imageCropped","loadImageFailed"],[1,"btn"],["mat-stroked-button","",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"save",3,"mat-dialog-close"],[1,"error"]],template:function(a,e){if(1&a){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Edit Banner"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(12);return t.KtG(o.click())}),t.TgZ(5,"span",3),t._uU(6,"Choose image"),t.qZA(),t.TgZ(7,"span",3),t._uU(8,"Change image"),t.qZA(),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"input",4,5),t.NdJ("change",function(o){return e.fileChangeEvent(o)}),t.qZA(),t.YNc(13,wt,2,0,"div",6),t.qZA(),t.TgZ(14,"div",3)(15,"mat-dialog-content")(16,"image-cropper",7),t.NdJ("imageCropped",function(o){return e.imageCropped(o)})("loadImageFailed",function(){return e.loadImageFailed()}),t.qZA()(),t.TgZ(17,"div",8)(18,"button",9),t.NdJ("click",function(){return e.onNoClick()}),t._uU(19,"Cancel"),t.qZA(),t.TgZ(20,"button",10),t._uU(21,"Save"),t.qZA()()()()}2&a&&(t.xp6(5),t.Q6J("hidden",e.originalImage),t.xp6(2),t.Q6J("hidden",!e.originalImage),t.xp6(6),t.Q6J("ngIf",e.invalidImage),t.xp6(1),t.Q6J("hidden",!e.originalImage),t.xp6(2),t.Q6J("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!1),t.xp6(4),t.Q6J("mat-dialog-close",e.finalImage))},dependencies:[v.O5,z.Hw,O.lW,m.ZT,m.xY,V],styles:[".container[_ngcontent-%COMP%]{padding:3rem}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600;color:var(--color-4);margin-bottom:1rem;margin-top:.5rem}.container[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:1rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin-bottom:2rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;color:var(--color-4);font-weight:700;font-size:1.1em;padding:1.5rem}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background-color:var(--color-1)}.container[_ngcontent-%COMP%]   .cropper[_ngcontent-%COMP%]{width:100%;padding:0}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%}.error[_ngcontent-%COMP%]{margin:1rem 2rem;color:#ff3e3e;font-weight:600;font-size:1.1em}"]});var Pt=p(2340),C=p(7626),It=p(9709),Tt=p(3115),Rt=p(7556),St=p(6338),D=p(457),zt=p(8735),Et=p(1594);const Zt=["banner"];function Ht(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",21)(2,"div")(3,"button",22)(4,"mat-icon"),t._uU(5,"edit"),t.qZA()(),t.TgZ(6,"mat-menu",null,23)(8,"button",24)(9,"span",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openViewImage(i.user.bannerURL))}),t._uU(10,"View Image"),t.qZA()(),t.TgZ(11,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openEditBanner())}),t.TgZ(12,"span",27),t._uU(13,"Edit Image"),t.qZA()()()()(),t.BQk()}if(2&s){const e=t.MAs(7);t.xp6(3),t.Q6J("matMenuTriggerFor",e)}}function Ut(s,a){if(1&s){const e=t.EpF();t.ynx(0),t._UZ(1,"img",28),t.TgZ(2,"mat-menu",null,29)(4,"button",24)(5,"span",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openViewImage(i.user.photoURL))}),t._uU(6,"View Image"),t.qZA()(),t.TgZ(7,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openEditAvatar())}),t.TgZ(8,"span",27),t._uU(9,"Edit Image"),t.qZA()()(),t.BQk()}if(2&s){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("src",n.user.photoURL,t.LSH)("matMenuTriggerFor",e)}}function kt(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"img",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openViewImage(i.user.photoURL))}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("src",e.user.photoURL,t.LSH)}}function Bt(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openEditBio())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Wt(s,a){if(1&s&&(t.ynx(0),t.YNc(1,Bt,3,0,"button",31),t.BQk()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.currentUser.uid===e.id)}}function Ft(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openEditJob())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Jt(s,a){if(1&s&&(t.ynx(0),t.YNc(1,Ft,3,0,"button",31),t.BQk()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.currentUser.uid===e.id)}}function Qt(s,a){if(1&s&&(t.TgZ(0,"div")(1,"mat-icon",33),t._uU(2,"work"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&s){const e=a.$implicit;t.xp6(4),t.Oqu(e)}}function Yt(s,a){1&s&&(t.TgZ(0,"div",34),t._uU(1," This user is currently not sharing any public documents. "),t.qZA())}function Dt(s,a){if(1&s&&(t.ynx(0),t._uU(1),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function jt(s,a){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,Dt,2,1,"ng-container",3),t.qZA()),2&s){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isPublic)}}function Nt(s,a){if(1&s&&t.YNc(0,jt,2,1,"div",17),2&s){const e=t.oxw(2);t.Q6J("ngForOf",e.documents)}}function Lt(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"div",2),t.YNc(1,Ht,14,1,"ng-container",3),t.TgZ(2,"div",4,5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openViewImage(i.user.bannerURL))}),t._UZ(4,"img",6),t.qZA(),t.TgZ(5,"div",7)(6,"div",8)(7,"span"),t.YNc(8,Ut,10,2,"ng-container",9),t.YNc(9,kt,1,1,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(11,"span",11)(12,"div"),t._uU(13),t.qZA()()()(),t.TgZ(14,"div",12)(15,"div")(16,"div")(17,"div",13)(18,"span"),t._uU(19,"Bio"),t.qZA(),t.YNc(20,Wt,2,1,"ng-container",3),t.qZA(),t.TgZ(21,"div",14),t._uU(22),t.qZA(),t.TgZ(23,"div",15)(24,"span"),t._uU(25,"Job"),t.qZA(),t.YNc(26,Jt,2,1,"ng-container",3),t.qZA(),t.TgZ(27,"div",16),t.YNc(28,Qt,5,1,"div",17),t.qZA()(),t.TgZ(29,"div",18)(30,"span"),t._uU(31,"Documents"),t.qZA(),t.TgZ(32,"div"),t.YNc(33,Yt,2,0,"div",19),t.YNc(34,Nt,1,1,"ng-template",null,20,t.W1O),t.qZA()()()()()}if(2&s){const e=t.MAs(10),n=t.MAs(35),i=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==i.currentUser?null:i.currentUser.uid)===i.id),t.xp6(3),t.Q6J("src",i.user.bannerURL,t.LSH),t.xp6(4),t.Q6J("ngIf",(null==i.currentUser?null:i.currentUser.uid)===i.id)("ngIfElse",e),t.xp6(5),t.Oqu(i.user.displayName),t.xp6(7),t.Q6J("ngIf",i.currentUser),t.xp6(2),t.Oqu(i.user.bio),t.xp6(4),t.Q6J("ngIf",i.currentUser),t.xp6(2),t.Q6J("ngForOf",i.user.job),t.xp6(5),t.Q6J("ngIf",!i.hasPublicDocs)("ngIfElse",n)}}function qt(s,a){1&s&&(t.TgZ(0,"div"),t._uU(1," this profile is not available "),t.qZA())}class k{constructor(a,e,n,i,o){var r=this;this.userService=a,this.documentService=e,this.activateRoute=n,this.dialog=i,this.authService=o,this.currentUser=null,this.id="",this.url=Pt.N.apiURL,this.storage=(0,C.cF)(),this.user={uid:"",email:"",bio:"",job:[],displayName:"",photoURL:"",bannerURL:"",starDocuments:[],following:[],followers:[]},this.documents=[],this.hasPublicDocs=!1,this.handleDialogBioClose=c=>{c&&(Object.assign(this.user,c),this.userService.updateUser(this.user).then(this.updateUser))},this.handleDialogJobClose=c=>{c&&(c.job=c.job.filter(g=>""!==g),Object.assign(this.user,c),this.userService.updateUser(this.user).then(this.updateUser))},this.handleDialogAvatarClose=function(){var c=(0,b.Z)(function*(g){g&&(yield(0,C.KV)(r.storageAvatar,g).then(h=>{(0,C.Jt)(r.storageAvatar).then(l=>{r.user.photoURL=l,r.userService.updateUser(r.user).then(r.updateUser)}).catch(l=>{console.log(l)})}).catch(h=>{console.log(h)}))});return function(g){return c.apply(this,arguments)}}(),this.handleDialogBannerClose=function(){var c=(0,b.Z)(function*(g){g&&(yield(0,C.KV)(r.storageBanner,g).then(h=>{(0,C.Jt)(r.storageBanner).then(l=>{r.user.bannerURL=l,r.userService.updateUser(r.user).then(r.updateUser)})}))});return function(g){return c.apply(this,arguments)}}(),this.handleDialogViewImageClose=c=>{},this.updateUser=c=>{Object.assign(this.user,c)}}ngOnInit(){this.activateRoute.params.subscribe(a=>{this.id=a.id,this.initializeUser(this.id),this.initializeUserDocuments(this.id)}),this.currentUser=this.authService.currentUser,this.currentUser&&(this.storageAvatar=(0,C.iH)(this.storage,`${this.currentUser.uid}/avatar.jpg`),this.storageBanner=(0,C.iH)(this.storage,`${this.currentUser.uid}/banner.jpg`)),this.authService.user$.subscribe(a=>{this.currentUser=a,this.currentUser&&(this.storageAvatar=(0,C.iH)(this.storage,`${this.currentUser.uid}/avatar.jpg`),this.storageBanner=(0,C.iH)(this.storage,`${this.currentUser.uid}/banner.jpg`))})}ngAfterViewInit(){}initializeUser(a){var e=this;return(0,b.Z)(function*(){e.user=yield e.userService.getUser(a)})()}initializeUserDocuments(a){var e=this;return(0,b.Z)(function*(){e.documents=yield e.documentService.getPublicDocs(a),e.hasPublicDocs=!!e.documents.find(n=>n.isPublic)})()}openEditBio(){this.dialog.open(S,{width:"500px",data:{bio:this.user.bio}}).afterClosed().subscribe(this.handleDialogBioClose)}openEditJob(){this.dialog.open(E,{width:"500px",data:{job:this.user.job}}).afterClosed().subscribe(this.handleDialogJobClose)}openEditAvatar(){this.dialog.open(Z,{width:"500px"}).afterClosed().subscribe(this.handleDialogAvatarClose)}openEditBanner(){this.dialog.open(U,{width:"500px"}).afterClosed().subscribe(this.handleDialogBannerClose)}openViewImage(a){this.dialog.open(H,{data:{url:a}}).afterClosed().subscribe(this.handleDialogAvatarClose)}}k.\u0275fac=function(a){return new(a||k)(t.Y36(It.K),t.Y36(Tt.Z),t.Y36(Y.gz),t.Y36(m.uw),t.Y36(Rt.e))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-profile"]],viewQuery:function(a,e){if(1&a&&t.Gf(Zt,5),2&a){let n;t.iGM(n=t.CRH())&&(e.banner=n.first)}},decls:5,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["notExist",""],[1,"container"],[4,"ngIf"],[1,"banner",3,"click"],["banner",""],[3,"src"],[1,"profile-image"],[1,"detail"],[4,"ngIf","ngIfElse"],["noaccess",""],[1,"name"],[1,"information-container"],[1,"bio-head"],[1,"bio"],[1,"job-head"],[1,"job"],[4,"ngFor","ngForOf"],[1,"documents"],["class","has-doc",4,"ngIf","ngIfElse"],["hasdoc",""],[1,"banner-edit"],["mat-icon-button","",3,"matMenuTriggerFor"],["banner","matMenu"],["mat-menu-item",""],[1,"menu-item",3,"click"],["mat-menu-item","",3,"click"],[1,"menu-item"],["onerror","this.src = '../../../assets/default-profile.jpg'","alt","avatar",1,"change",3,"src","matMenuTriggerFor"],["avatar","matMenu"],["alt","avatar",1,"avatar-no-access",3,"src","click"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["matListItemIcon",""],[1,"has-doc"]],template:function(a,e){if(1&a&&(t._UZ(0,"app-loading")(1,"app-navbar"),t.YNc(2,Lt,36,11,"div",0),t.YNc(3,qt,2,0,"ng-template",null,1,t.W1O)),2&a){const n=t.MAs(4);t.xp6(2),t.Q6J("ngIf",e.user)("ngIfElse",n)}},dependencies:[v.sg,v.O5,z.Hw,O.RK,St.Yt,D.VK,D.OP,D.p6,zt.S,Et.N],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;position:relative;z-index:2}.banner[_ngcontent-%COMP%], .banner-edit[_ngcontent-%COMP%]{position:absolute;width:100%;height:400px;cursor:pointer}.banner[_ngcontent-%COMP%]:hover, .banner-edit[_ngcontent-%COMP%]:hover{filter:brightness(.8);transition:all .2s ease-in-out}.banner[_ngcontent-%COMP%]{z-index:0;overflow:hidden;background-size:cover;background-position:center;background-color:gray;box-shadow:2px 0 150px 50px rgba(var(--color-4-rgb),.5) inset}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;height:100%;object-fit:cover}.banner-edit[_ngcontent-%COMP%]{z-index:3;width:100%;display:flex;flex-direction:row;justify-content:flex-end;align-items:flex-end}.banner-edit[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--color-1);margin-top:64px;z-index:4}.banner-edit[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#fff}.profile-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:1200px;height:100%;transition:all .2s ease-in-out;margin-top:300px;z-index:1}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;margin:0 10px;background-color:gray;border:5px solid var(--color-5);box-shadow:0 0 10px 0 rgba(var(--color-1-rgb),.5)}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:50px 2rem;color:var(--color-4);font-size:1.5em;font-weight:800}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]:hover{filter:brightness(.8);cursor:pointer;transition:all .2s ease-in-out}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:active{filter:brightness(.6);transition:all .2s ease-in-out}.avatar-no-access[_ngcontent-%COMP%]{cursor:pointer}.avatar-no-access[_ngcontent-%COMP%]:hover{filter:brightness(.8);transition:all .2s ease-in-out}.avatar-no-access[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:active{filter:brightness(.6);transition:all .2s ease-in-out}.menu-item[_ngcontent-%COMP%]{display:flex;justify-content:center;width:168px!important}.information-container[_ngcontent-%COMP%]{height:100%;width:100%;transition:all .2s ease-in-out}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:1200px;height:100%;margin:0 auto;display:flex;flex-direction:row}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:2rem 1rem;width:calc(30% - 2rem);height:100%}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .documents[_ngcontent-%COMP%]{padding:2rem 1rem;width:calc(70% - 2rem);min-height:auto}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .documents[_ngcontent-%COMP%]   .has-doc[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;height:100%}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.3em;font-weight:800;color:var(--color-4);margin-top:1rem;margin-bottom:.5rem}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .documents[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:var(--color-1);border-radius:10px;padding:1rem;font-size:1rem;box-shadow:2px 2px 4px 0 rgba(var(--color-4-rgb),.5);flex:1 1 auto;white-space:pre-wrap}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{display:flex;flex-direction:column}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--color-4);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin:.5rem}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{padding-right:1rem}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .bio-head[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job-head[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .bio-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:rgba(var(--color-4-rgb),.5);transition:all .2s ease-in-out}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .bio-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-4);transition:all .2s ease-in-out}@media screen and (max-width: 1200px){.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:center;transition:all .2s ease-in-out}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:1rem;padding:0rem}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;flex-direction:column}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .documents[_ngcontent-%COMP%]{padding:1rem 2rem;width:calc(100% - 4rem)}}@media screen and (max-width: 600px){.banner[_ngcontent-%COMP%], .banner-edit[_ngcontent-%COMP%]{height:300px}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin-top:225px}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:150px;height:150px}.profile-image[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:1.2em;margin:2rem}.information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%], .information-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .documents[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:.75rem}.menu-item[_ngcontent-%COMP%]{width:150px!important}}"]});const Kt=[{path:"",component:k}];class w{}w.\u0275fac=function(a){return new(a||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[Y.Bz.forChild(Kt),Y.Bz]});var Vt=p(2271),Gt=p(9717);class P{}P.\u0275fac=function(a){return new(a||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({imports:[v.ez,w,Vt.m,Gt.h,y.u5,Ot]})}}]);